{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport RankIcon from './RankIcon';\nimport Section from '../Section';\nimport WeatherIcon from '../skywatcher/WeatherIcon';\nimport { Weather } from '../skywatcher/ffxiv-skywatcher/src/types';\nimport { formatMonster } from './utils';\nimport bozja from './ffxiv-bozja/data/bozja.json';\nimport { upperFirst } from '../utils';\nimport translate from '../translate';\nimport { useTranslation } from '../i18n';\nvar conditionMap = {\n  dust: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.DustStorms\n  }),\n  rain: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Rain\n  }),\n  thunder: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Thunder\n  }),\n  wind: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Wind\n  }),\n  night: 'Night'\n};\n\nfunction cleanFragment(name) {\n  return upperFirst(name.replace(/^(Forgotten Fragment of |Unbegutachteter Frontsplitter (der|des) |Éclat oublié non identifié (de |d')|未鑑定ロストシャード:)/, ''));\n}\n\nfunction parseActions(description, locale) {\n  var _description$match, _description$match2, _description$match3, _description$match4;\n\n  var actions;\n\n  switch (locale) {\n    case 'en':\n    case 'cn': // Fallback\n\n    case 'ko':\n      // Fallback\n      actions = (_description$match = description.match(/Potential memories contained: (.*)$/)) === null || _description$match === void 0 ? void 0 : _description$match[1].split(', ');\n      break;\n\n    case 'de':\n      actions = (_description$match2 = description.match(/Kann folgende Verschollene Kommandos enthalten: (.*)$/)) === null || _description$match2 === void 0 ? void 0 : _description$match2[1].split(', ');\n      break;\n\n    case 'fr':\n      actions = (_description$match3 = description.match(/Son identification peut octroyer (.*?)\\./)) === null || _description$match3 === void 0 ? void 0 : _description$match3[1].split(/(?:, | ou )/);\n      break;\n\n    case 'ja':\n      actions = (_description$match4 = description.match(/鑑定結果候補:(.*)$/)) === null || _description$match4 === void 0 ? void 0 : _description$match4[1].split('／');\n      break;\n  }\n\n  if (actions === undefined) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        whiteSpace: 'pre-wrap'\n      },\n      children: description\n    });\n  } else {\n    return actions.map(function (action, index) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        children: action\n      }, index);\n    });\n  }\n}\n\nvar DropsTable = function DropsTable() {\n  var _useTranslation = useTranslation('bozja'),\n      i18n = _useTranslation.i18n;\n\n  var locale = i18n.language;\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsx(TableContainer, {\n      children: /*#__PURE__*/_jsx(Table, {\n        size: \"small\",\n        children: ['zone1', 'zone2', 'zone3'].map(function (zone) {\n          return /*#__PURE__*/_jsxs(React.Fragment, {\n            children: [/*#__PURE__*/_jsx(TableHead, {\n              children: /*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Fragment\"\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Actions\"\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Count\"\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Rate\"\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Monster\"\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: \"Conditions\"\n                })]\n              })\n            }), /*#__PURE__*/_jsx(TableBody, {\n              children: bozja.drops[zone].map(function (datum) {\n                return datum.loot;\n              }).sort(function (a, b) {\n                return a - b;\n              }).filter(function (loot, index, array) {\n                return loot !== array[index + 1];\n              }).map(function (loot) {\n                return bozja.drops[zone].filter(function (datum) {\n                  return datum.loot === loot;\n                }).sort(function (a, b) {\n                  var aR = a.rank === 'S' ? 6 : a.rank;\n                  var bR = b.rank === 'S' ? 6 : b.rank;\n                  return aR === bR ? a.monster - b.monster : aR - bR;\n                }).map(function (datum, index, array) {\n                  return /*#__PURE__*/_jsxs(TableRow, {\n                    children: [index === 0 && /*#__PURE__*/_jsxs(_Fragment, {\n                      children: [/*#__PURE__*/_jsx(TableCell, {\n                        rowSpan: array.length,\n                        align: \"center\",\n                        children: cleanFragment(translate(locale, bozja.items[loot], 'name'))\n                      }), /*#__PURE__*/_jsx(TableCell, {\n                        rowSpan: array.length,\n                        children: loot !== 31135 && parseActions(translate(locale, bozja.items[loot], 'description'), locale)\n                      })]\n                    }), /*#__PURE__*/_jsxs(TableCell, {\n                      align: \"center\",\n                      children: [\"\\xD7\", datum.count]\n                    }), /*#__PURE__*/_jsxs(TableCell, {\n                      align: \"center\",\n                      children: [datum.rate, \"%\"]\n                    }), /*#__PURE__*/_jsxs(TableCell, {\n                      children: [/*#__PURE__*/_jsx(RankIcon, {\n                        rank: datum.rank\n                      }), formatMonster(translate(locale, datum, 'name'), locale)]\n                    }), /*#__PURE__*/_jsx(TableCell, {\n                      align: \"center\",\n                      children: conditionMap[datum.condition]\n                    })]\n                  }, index);\n                });\n              })\n            })]\n          }, zone);\n        })\n      })\n    })\n  });\n};\n\nexport default DropsTable;","map":null,"metadata":{},"sourceType":"module"}