{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport OceanFishIcon from './OceanFishIcon';\nimport { getStopTimes, calculateVoyages, calculateVoyagesOld } from './ffxiv-ocean-fishing';\nimport * as maps from './maps';\nimport { getBlueFish, timeUntil, upperFirst } from './utils';\nimport { toTimeString } from '../utils';\nimport translate from '../translate';\nimport { useTranslation } from '../i18n';\nconst DATE_FORMAT = {\n  month: '2-digit',\n  day: '2-digit'\n};\nconst useStyles = makeStyles(theme => ({\n  schedule: {\n    '& td': {\n      height: 53,\n      paddingTop: theme.spacing(0.25),\n      paddingBottom: theme.spacing(0.25),\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1),\n      whiteSpace: 'nowrap'\n    },\n    '& td:first-child': {\n      paddingLeft: theme.spacing(2)\n    },\n    '& td:last-child': {\n      paddingRight: theme.spacing(2)\n    },\n    '& tbody tr:hover': {\n      cursor: 'pointer'\n    }\n  },\n  hoverRow: {\n    backgroundColor: theme.palette.action.hover\n  },\n  timeUntil: {\n    [theme.breakpoints.down('sm')]: {\n      display: 'none'\n    }\n  },\n  timeCell: {\n    '& svg': {\n      top: 0,\n      verticalAlign: 'middle'\n    }\n  },\n  objectivesCell: {\n    '& div': {\n      verticalAlign: 'middle',\n      fontSize: '1rem'\n    }\n  }\n}));\n\nconst UpcomingVoyagesTable = ({\n  now,\n  numRows,\n  useOld = false,\n  filter,\n  onSelectRoute\n}) => {\n  const classes = useStyles();\n  const {\n    t,\n    i18n\n  } = useTranslation('ocean-fishing');\n  const {\n    0: hover,\n    1: setHover\n  } = useState(null);\n  const upcomingVoyages = (useOld ? calculateVoyagesOld : calculateVoyages)(now, Math.min(Math.max(numRows, 1), 50), filter);\n  const locale = i18n.language;\n  return /*#__PURE__*/_jsx(TableContainer, {\n    component: Paper,\n    children: /*#__PURE__*/_jsxs(Table, {\n      size: \"small\",\n      className: classes.schedule,\n      children: [/*#__PURE__*/_jsx(TableHead, {\n        children: /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            colSpan: 3,\n            align: \"center\",\n            children: t('routeInfo.time')\n          }), /*#__PURE__*/_jsx(TableCell, {\n            colSpan: 2,\n            align: \"center\",\n            children: t('routeInfo.route')\n          }), /*#__PURE__*/_jsx(TableCell, {\n            align: \"center\",\n            children: t('routeInfo.objectives')\n          })]\n        })\n      }), /*#__PURE__*/_jsx(TableBody, {\n        onMouseOut: setHover.bind(null, null),\n        children: (() => {\n          let previousDate;\n          return upcomingVoyages.map(({\n            date,\n            destTime\n          }) => {\n            const dateString = date.toLocaleDateString(locale, DATE_FORMAT);\n            return /*#__PURE__*/_jsxs(TableRow, {\n              hover: true,\n              className: clsx(filter === undefined && hover === destTime && classes.hoverRow),\n              onMouseOver: setHover.bind(null, destTime),\n              onClick: onSelectRoute.bind(null, destTime),\n              children: [/*#__PURE__*/_jsx(TableCell, {\n                align: \"right\",\n                children: previousDate !== (previousDate = dateString) && /*#__PURE__*/_jsx(Typography, {\n                  children: dateString\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(Typography, {\n                  children: toTimeString(date, {\n                    padded: true,\n                    locale\n                  })\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(Typography, {\n                  className: classes.timeUntil,\n                  children: timeUntil(now, date, {\n                    t,\n                    locale\n                  })\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsx(Typography, {\n                  children: upperFirst(translate(locale, maps.STOP_MAP[destTime[0]].placeName_sub, 'name_noArticle', 'name'))\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                className: classes.timeCell,\n                children: maps.TIME_MAP[destTime[1]]\n              }), /*#__PURE__*/_jsxs(TableCell, {\n                className: classes.objectivesCell,\n                children: [maps.ACHIEVEMENTS_MAP[destTime].map(achievement => /*#__PURE__*/_jsx(OceanFishIcon, {\n                  type: \"achievement\",\n                  id: achievement.id\n                }, achievement.id)), getStopTimes(destTime).map(stopTime => {\n                  const blueFish = getBlueFish(stopTime);\n                  return blueFish !== null && /*#__PURE__*/_jsx(OceanFishIcon, {\n                    type: \"fish\",\n                    id: blueFish.id\n                  }, blueFish.id);\n                })]\n              })]\n            }, date.getTime());\n          });\n        })()\n      })]\n    })\n  });\n};\n\nexport default UpcomingVoyagesTable;","map":null,"metadata":{},"sourceType":"module"}