{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Head from 'next/head';\nimport { Icon, CRS } from 'leaflet';\nimport { MapContainer, ImageOverlay, Marker, Tooltip } from 'react-leaflet';\nimport Grid from '@material-ui/core/Grid';\nimport Section from '../Section';\nimport bozja from './ffxiv-bozja/data/bozja.json';\nimport { useTranslation } from '../i18n';\nimport { translate } from '../utils';\n\nfunction getCoords(x, y) {\n  const scale = bozja.sizeFactor / 100;\n  const cX = (x + bozja.offsetX) * scale;\n  const cY = (y + bozja.offsetY) * scale; // Not sure why I'm offset by -18, -12 here\n\n  const fX = 41 / scale * ((cX + 1024) / 2048) + 1 - 18;\n  const fY = 41 / scale * ((cY + 1024) / 2048) + 1 - 12;\n  return [43 - fY, fX];\n}\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '100%',\n    height: 0,\n    paddingBottom: '100%',\n    margin: theme.spacing(0, 'auto'),\n    border: '2px solid black',\n    overflow: 'hidden'\n  },\n  tooltip: {\n    background: 'none',\n    border: 'none',\n    boxShadow: 'none',\n    color: 'white',\n    fontSize: '1.1em',\n    textShadow: '0 0 3px black, 0 0 3px black, 0 0 3px black, 0 0 3px black',\n    '&::before, &::after': {\n      display: 'none'\n    }\n  }\n}));\n\nfunction getDirection(orientation) {\n  switch (orientation) {\n    case 1:\n      return 'left';\n\n    case 3:\n      return 'bottom';\n\n    case 4:\n      return 'top';\n\n    case 9:\n      return 'center';\n\n    default:\n      return 'auto';\n  }\n}\n\nconst Map = () => {\n  const classes = useStyles();\n  const {\n    i18n\n  } = useTranslation();\n  const locale = i18n.language;\n  return /*#__PURE__*/_jsxs(Section, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"link\", {\n        href: \"/static/leaflet.css\",\n        rel: \"stylesheet\"\n      }, 'leaflet')\n    }), /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      spacing: 2,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        md: 4\n      }), /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        md: 8,\n        children: /*#__PURE__*/_jsxs(MapContainer, {\n          bounds: [[1, 1], [42, 42]],\n          maxBounds: [[1, 1], [42, 42]],\n          attributionControl: false,\n          crs: CRS.Simple,\n          zoomSnap: 0,\n          maxZoom: 7,\n          className: classes.container,\n          children: [/*#__PURE__*/_jsx(ImageOverlay, {\n            bounds: [[1, 1], [42, 42]],\n            url: \"/images/bozja/bozja.png\"\n          }), bozja.mapMarkers.filter(mapMarker => mapMarker.icon !== 0).map((mapMarker, index) => /*#__PURE__*/_jsx(Marker, {\n            position: getCoords(mapMarker.x, mapMarker.y),\n            icon: new Icon({\n              iconUrl: `/images/bozja/icon-${mapMarker.icon}.png`,\n              iconSize: [32, 32]\n            }),\n            title: mapMarker.placeName_subtext_en,\n            children: mapMarker.placeName_subtext_en !== '' && /*#__PURE__*/_jsx(Tooltip, {\n              permanent: true,\n              className: classes.tooltip,\n              direction: getDirection(mapMarker.subtextOrientation),\n              children: translate(locale, mapMarker, 'placeName_subtext')\n            })\n          }, index))]\n        })\n      })]\n    })]\n  });\n};\n\nexport default Map;","map":null,"metadata":{},"sourceType":"module"}