{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Alert from '@material-ui/lab/Alert';\nimport Section from '../../src/Section';\n\nfunction sortFishes(fishes) {\n  return fishes.sort((a, b) => a - b).filter((fish, index, array) => fish !== array[index + 1]);\n}\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[200] : undefined\n  },\n  textField: {\n    fontFamily: 'monospace, monospace'\n  },\n  buttons: {\n    '& button': {\n      margin: theme.spacing(2, 2, 0, 0)\n    }\n  }\n}));\n\nconst ImportFishes = ({\n  checklist,\n  setChecklist\n}) => {\n  const classes = useStyles();\n  const {\n    0: importData,\n    1: setImportData\n  } = useState('');\n  const {\n    0: message,\n    1: setMessage\n  } = useState(null);\n\n  const handleInputImportData = event => {\n    setImportData(event.target.value);\n  };\n\n  const handleClickImport = () => {\n    try {\n      const data = JSON.parse(importData);\n\n      if (Array.isArray(data)) {\n        setChecklist(sortFishes(data));\n        setMessage({\n          type: 'success',\n          message: `Imported ${data.length} fishes.`\n        });\n      } else if (Array.isArray(data.completed)) {\n        setChecklist(sortFishes(data.completed));\n        setMessage({\n          type: 'success',\n          message: `Imported ${data.completed.length} fishes.`\n        });\n      } else {\n        setMessage({\n          type: 'error',\n          message: 'Could not parse data.'\n        });\n      }\n    } catch (_) {\n      setMessage({\n        type: 'error',\n        message: 'Could not parse data.'\n      });\n    }\n  };\n\n  const handleClickMerge = () => {\n    try {\n      const data = JSON.parse(importData);\n\n      if (Array.isArray(data)) {\n        setChecklist(sortFishes(checklist.concat(data)));\n        setMessage({\n          type: 'success',\n          message: `Imported ${data.length} fishes.`\n        });\n      } else if (Array.isArray(data.completed)) {\n        setChecklist(sortFishes(checklist.concat(data.completed)));\n        setMessage({\n          type: 'success',\n          message: `Imported ${data.completed.length} fishes.`\n        });\n      } else {\n        setMessage({\n          type: 'error',\n          message: 'Could not parse data.'\n        });\n      }\n    } catch (_) {\n      setMessage({\n        type: 'error',\n        message: 'Could not parse data.'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsxs(Box, {\n      component: Paper,\n      p: 2,\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxs(Typography, {\n        children: [\"Paste code from \", /*#__PURE__*/_jsx(Link, {\n          href: \"https://lalachievements.com/\",\n          children: \"Lalachievements\"\n        }), \" or \", /*#__PURE__*/_jsx(Link, {\n          href: \"https://ff14fish.carbuncleplushy.com/\",\n          children: \"FFX|V Fish Tracker App\"\n        }), \" below.\"]\n      }), /*#__PURE__*/_jsx(TextField, {\n        multiline: true,\n        fullWidth: true,\n        variant: \"outlined\",\n        rows: 4,\n        margin: \"normal\",\n        value: importData,\n        onChange: handleInputImportData,\n        InputProps: {\n          className: classes.textField\n        }\n      }), message !== null && /*#__PURE__*/_jsx(Alert, {\n        variant: \"outlined\",\n        severity: message === null || message === void 0 ? void 0 : message.type,\n        children: message === null || message === void 0 ? void 0 : message.message\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.buttons,\n        children: [/*#__PURE__*/_jsx(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleClickImport,\n          children: \"Import\"\n        }), /*#__PURE__*/_jsx(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleClickMerge,\n          children: \"Merge\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default ImportFishes;","map":null,"metadata":{},"sourceType":"module"}