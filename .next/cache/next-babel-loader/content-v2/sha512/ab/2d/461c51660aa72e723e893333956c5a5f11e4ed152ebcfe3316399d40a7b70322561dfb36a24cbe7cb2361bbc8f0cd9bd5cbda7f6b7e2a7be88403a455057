{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/root/ffxiv/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Button from '@material-ui/core/Button';\nimport Section from '../Section';\nimport CalculatorCell from './CalculatorCell';\nimport { calculateProbabilities } from './ffxiv-wondrous-tails';\nimport { useTranslation } from '../i18n';\nvar PROB_1_LINES = 6688 / 11440;\nvar PROB_2_LINES = 1208 / 11440;\nvar PROB_3_LINES = 24 / 11440;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    gridShrink: _defineProperty({\n      textAlign: 'center'\n    }, theme.breakpoints.up('md'), {\n      flex: '0 0 auto'\n    }),\n    gridGrow: _defineProperty({}, theme.breakpoints.up('md'), {\n      flex: '1 1 0px'\n    }),\n    cellsContainer: {\n      display: 'inline-block',\n      borderCollapse: 'collapse',\n      borderSpacing: 0,\n      border: theme.palette.type === 'dark' ? '1px solid gray' : '1px solid black',\n      '& td': {\n        padding: 0,\n        lineHeight: 0\n      }\n    },\n    probabilities: {\n      marginBottom: theme.spacing(2),\n      '& table': {\n        width: 'initial',\n        '& thead, & tbody': {\n          background: 'none'\n        },\n        '& th': {\n          padding: theme.spacing(1, 2)\n        },\n        '& td': {\n          padding: theme.spacing(1, 2),\n          border: 0\n        }\n      }\n    }\n  };\n});\n\nfunction toPercent(val) {\n  return /*#__PURE__*/_jsx(Typography, {\n    children: (val * 100).toFixed(1) + '%'\n  });\n}\n\nfunction toDeviationPercent(val) {\n  var string = (val >= 0 ? '+' : '') + (val * 100).toFixed(1) + '%';\n  var color = val > 0 ? 'green' : val < 0 ? 'red' : undefined;\n  return /*#__PURE__*/_jsx(Typography, {\n    style: {\n      color: color\n    },\n    children: string\n  });\n}\n\nvar Calculator = function Calculator() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('wondrous-tails'),\n      t = _useTranslation.t;\n\n  var _useState = useState(Array(16).fill(false)),\n      board = _useState[0],\n      setBoard = _useState[1];\n\n  var _calculateProbabiliti = calculateProbabilities(board),\n      lines1 = _calculateProbabiliti.lines1,\n      lines2 = _calculateProbabiliti.lines2,\n      lines3 = _calculateProbabiliti.lines3,\n      total = _calculateProbabiliti.total;\n\n  var filledCells = board.filter(function (x) {\n    return x;\n  }).length;\n\n  var toggleCell = function toggleCell(index) {\n    var newBoard = board.slice();\n    newBoard[index] = !board[index];\n    setBoard(newBoard);\n  };\n\n  var handleClickReset = function handleClickReset() {\n    setBoard(Array(16).fill(false));\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      spacing: 4,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.gridShrink,\n        children: /*#__PURE__*/_jsx(TableContainer, {\n          children: /*#__PURE__*/_jsx(\"table\", {\n            className: classes.cellsContainer,\n            children: /*#__PURE__*/_jsxs(\"tbody\", {\n              children: [/*#__PURE__*/_jsxs(\"tr\", {\n                children: [/*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[0],\n                    onSelect: toggleCell.bind(null, 0)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[1],\n                    onSelect: toggleCell.bind(null, 1)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[2],\n                    onSelect: toggleCell.bind(null, 2)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[3],\n                    onSelect: toggleCell.bind(null, 3)\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"tr\", {\n                children: [/*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[4],\n                    onSelect: toggleCell.bind(null, 4)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[5],\n                    onSelect: toggleCell.bind(null, 5)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[6],\n                    onSelect: toggleCell.bind(null, 6)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[7],\n                    onSelect: toggleCell.bind(null, 7)\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"tr\", {\n                children: [/*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[8],\n                    onSelect: toggleCell.bind(null, 8)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[9],\n                    onSelect: toggleCell.bind(null, 9)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[10],\n                    onSelect: toggleCell.bind(null, 10)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[11],\n                    onSelect: toggleCell.bind(null, 11)\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"tr\", {\n                children: [/*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[12],\n                    onSelect: toggleCell.bind(null, 12)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[13],\n                    onSelect: toggleCell.bind(null, 13)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[14],\n                    onSelect: toggleCell.bind(null, 14)\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(CalculatorCell, {\n                    selected: board[15],\n                    onSelect: toggleCell.bind(null, 15)\n                  })\n                })]\n              })]\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsxs(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.gridGrow,\n        children: [/*#__PURE__*/_jsxs(Typography, {\n          variant: \"h6\",\n          paragraph: true,\n          children: [filledCells, \" / 9\"]\n        }), filledCells <= 9 ? /*#__PURE__*/_jsx(Typography, {\n          paragraph: true,\n          children: t('selectStickers')\n        }) : /*#__PURE__*/_jsx(Typography, {\n          paragraph: true,\n          children: t('tooManyStickers')\n        }), /*#__PURE__*/_jsx(TableContainer, {\n          className: classes.probabilities,\n          children: /*#__PURE__*/_jsxs(Table, {\n            children: [/*#__PURE__*/_jsx(TableHead, {\n              children: /*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  children: t('lines')\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  children: t('chance')\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  children: t('deviation')\n                })]\n              })\n            }), /*#__PURE__*/_jsxs(TableBody, {\n              children: [/*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    children: \"1+\"\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toPercent(lines1 / total)\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toDeviationPercent(lines1 / total - PROB_1_LINES)\n                })]\n              }), /*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    children: \"2+\"\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toPercent(lines2 / total)\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toDeviationPercent(lines2 / total - PROB_2_LINES)\n                })]\n              }), /*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    children: \"3\"\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toPercent(lines3 / total)\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"right\",\n                  children: toDeviationPercent(lines3 / total - PROB_3_LINES)\n                })]\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          onClick: handleClickReset,\n          children: t('reset')\n        })]\n      })]\n    })\n  });\n};\n\nexport default Calculator;","map":null,"metadata":{},"sourceType":"module"}