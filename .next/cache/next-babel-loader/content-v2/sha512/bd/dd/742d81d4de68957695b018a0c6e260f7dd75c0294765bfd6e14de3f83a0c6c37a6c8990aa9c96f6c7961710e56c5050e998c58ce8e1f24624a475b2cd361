{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport OceanFishIcon from './OceanFishIcon';\nimport { fishingSpots, placeNames } from './ocean-fishing/data';\nimport { calculateVoyages } from './ocean-fishing';\nimport * as maps from './maps';\nimport { toTimeString } from '../utils';\nimport { getBlueFish, timeUntil, translate, upperFirst } from './utils';\nimport { useTranslation } from '../i18n';\nvar DATE_FORMAT = {\n  month: '2-digit',\n  day: '2-digit'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    schedule: {\n      '& td': {\n        height: 53,\n        paddingTop: theme.spacing(0.25),\n        paddingBottom: theme.spacing(0.25),\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        whiteSpace: 'nowrap'\n      },\n      '& td:first-child': {\n        paddingLeft: theme.spacing(2)\n      },\n      '& td:last-child': {\n        paddingRight: theme.spacing(2)\n      },\n      '& tbody tr:hover': {\n        cursor: 'pointer'\n      }\n    },\n    hoverRow: {\n      backgroundColor: theme.palette.action.hover\n    },\n    timeUntil: _defineProperty({}, theme.breakpoints.down('sm'), {\n      display: 'none'\n    }),\n    timeCell: {\n      '& svg': {\n        top: 0,\n        verticalAlign: 'middle'\n      }\n    },\n    objectivesCell: {\n      '& div': {\n        verticalAlign: 'middle',\n        fontSize: '1rem'\n      }\n    }\n  };\n});\n\nvar UpcomingVoyagesTable = function UpcomingVoyagesTable(_ref) {\n  var now = _ref.now,\n      numRows = _ref.numRows,\n      filter = _ref.filter,\n      onSelectRoute = _ref.onSelectRoute;\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('ocean-fishing'),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState = useState(null),\n      hover = _useState[0],\n      setHover = _useState[1];\n\n  var upcomingVoyages = calculateVoyages(now, Math.min(Math.max(numRows, 1), 50), filter);\n  var locale = i18n.language;\n  return /*#__PURE__*/_jsx(TableContainer, {\n    component: Paper,\n    children: /*#__PURE__*/_jsxs(Table, {\n      size: \"small\",\n      className: classes.schedule,\n      children: [/*#__PURE__*/_jsx(TableHead, {\n        children: /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            colSpan: 3,\n            align: \"center\",\n            children: t('routeInfo.time')\n          }), /*#__PURE__*/_jsx(TableCell, {\n            colSpan: 2,\n            align: \"center\",\n            children: t('routeInfo.route')\n          }), /*#__PURE__*/_jsx(TableCell, {\n            align: \"center\",\n            children: t('routeInfo.objectives')\n          })]\n        })\n      }), /*#__PURE__*/_jsx(TableBody, {\n        onMouseOut: setHover.bind(null, null),\n        children: function () {\n          var previousDate;\n          return upcomingVoyages.map(function (_ref2) {\n            var time = _ref2.time,\n                destinationCode = _ref2.destinationCode;\n            var dateString = time.toLocaleDateString(locale, DATE_FORMAT);\n            var timeString = toTimeString(time, {\n              padded: true,\n              locale: locale\n            });\n            return /*#__PURE__*/_jsxs(TableRow, {\n              hover: true,\n              className: clsx(!filter && hover === destinationCode && classes.hoverRow),\n              onMouseOver: setHover.bind(null, destinationCode),\n              onClick: onSelectRoute.bind(null, destinationCode),\n              children: [/*#__PURE__*/_jsx(TableCell, {\n                align: \"right\",\n                children: previousDate !== (previousDate = dateString) && /*#__PURE__*/_jsx(Typography, {\n                  children: dateString\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(Typography, {\n                  children: timeString\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                children: /*#__PURE__*/_jsx(Typography, {\n                  className: classes.timeUntil,\n                  children: timeUntil(now, time, {\n                    t: t,\n                    locale: locale\n                  })\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsx(Typography, {\n                  children: upperFirst(translate(locale, placeNames[fishingSpots[maps.STOP_MAP[destinationCode[0]]].placeName_sub], 'name_noArticle', 'name'))\n                })\n              }), /*#__PURE__*/_jsx(TableCell, {\n                className: classes.timeCell,\n                children: maps.TIME_MAP[destinationCode[1]]\n              }), /*#__PURE__*/_jsxs(TableCell, {\n                className: classes.objectivesCell,\n                children: [maps.ACHIEVEMENTS_MAP[destinationCode].map(function (achievement) {\n                  return /*#__PURE__*/_jsx(OceanFishIcon, {\n                    type: \"achievement\",\n                    id: achievement\n                  }, achievement);\n                }), getBlueFish(destinationCode).map(function (fishId) {\n                  return fishId && /*#__PURE__*/_jsx(OceanFishIcon, {\n                    type: \"fish\",\n                    id: fishId\n                  }, fishId);\n                })]\n              })]\n            }, time.getTime());\n          });\n        }()\n      })]\n    })\n  });\n};\n\nexport default UpcomingVoyagesTable;","map":null,"metadata":{},"sourceType":"module"}