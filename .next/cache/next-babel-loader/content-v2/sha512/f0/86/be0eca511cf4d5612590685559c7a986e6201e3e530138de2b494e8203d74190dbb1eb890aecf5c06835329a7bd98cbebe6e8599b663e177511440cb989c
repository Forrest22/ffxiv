{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport RankIcon from './RankIcon';\nimport Section from '../Section';\nimport WeatherIcon from '../skywatcher/WeatherIcon';\nimport { Weather } from '../skywatcher/ffxiv-skywatcher/src/types';\nimport { formatMonster } from './utils';\nimport bozja from './ffxiv-bozja/data/bozja.json';\nimport { upperFirst } from '../utils';\nimport translate from '../translate';\nimport { useTranslation } from '../i18n';\nvar conditionMap = {\n  dust: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.DustStorms\n  }),\n  rain: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Rain\n  }),\n  thunder: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Thunder\n  }),\n  wind: /*#__PURE__*/_jsx(WeatherIcon, {\n    weather: Weather.Wind\n  }),\n  night: 'Night'\n};\n\nfunction cleanFragment(name, locale) {\n  var _ref, _name$match;\n\n  switch (locale) {\n    case 'en':\n      return upperFirst(name.replace(/^Forgotten Fragment of /, ''));\n\n    case 'de':\n      return upperFirst(name.replace(/^Unbegutachteter Frontsplitter (der|des) /, ''));\n\n    case 'fr':\n      return upperFirst(name.replace(/^Éclat oublié non identifié (de |d')/, ''));\n\n    case 'ja':\n      return name.replace(/^未鑑定ロストシャード:/, '');\n\n    case 'cn':\n      return (_ref = (_name$match = name.match(/未鉴定的(.*)失传碎晶/)) === null || _name$match === void 0 ? void 0 : _name$match[1]) !== null && _ref !== void 0 ? _ref : name;\n\n    case 'ko':\n      return name.replace(/^미감정 로스트 샤드: /, '');\n\n    default:\n      return name;\n  }\n}\n\nfunction parseActions(description, locale) {\n  var _description$match, _description$match2, _description$match3, _description$match4, _description$match5, _description$match6;\n\n  var actions;\n\n  switch (locale) {\n    case 'en':\n      actions = (_description$match = description.match(/Potential memories contained: (.*)$/)) === null || _description$match === void 0 ? void 0 : _description$match[1].split(', ');\n      break;\n\n    case 'de':\n      actions = (_description$match2 = description.match(/Kann folgende Verschollene Kommandos enthalten: (.*)$/)) === null || _description$match2 === void 0 ? void 0 : _description$match2[1].split(', ');\n      break;\n\n    case 'fr':\n      actions = (_description$match3 = description.match(/Son identification peut octroyer (.*?)\\./)) === null || _description$match3 === void 0 ? void 0 : _description$match3[1].split(/(?:, | ou )/);\n      break;\n\n    case 'ja':\n      actions = (_description$match4 = description.match(/鑑定結果候補:(.*)$/)) === null || _description$match4 === void 0 ? void 0 : _description$match4[1].split('／');\n      break;\n\n    case 'cn':\n      actions = (_description$match5 = description.match(/鉴定结果预测：(.*)/)) === null || _description$match5 === void 0 ? void 0 : _description$match5[1].split('/');\n      break;\n\n    case 'ko':\n      actions = (_description$match6 = description.match(/감정 결과 후보: (.*)/)) === null || _description$match6 === void 0 ? void 0 : _description$match6[1].split('/');\n      break;\n  }\n\n  if (actions === undefined) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        whiteSpace: 'pre-wrap'\n      },\n      children: description\n    });\n  } else {\n    return actions.map(function (action, index) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        children: action\n      }, index);\n    });\n  }\n}\n\nvar DropsTable = function DropsTable() {\n  var _useTranslation = useTranslation('bozja'),\n      i18n = _useTranslation.i18n;\n\n  var _useState = useState(0),\n      tab = _useState[0],\n      setTab = _useState[1];\n\n  var locale = i18n.language;\n\n  var handleChangeTab = function handleChangeTab(_, value) {\n    setTab(value);\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsxs(Paper, {\n      children: [/*#__PURE__*/_jsxs(Tabs, {\n        variant: \"fullWidth\",\n        value: tab,\n        onChange: handleChangeTab,\n        children: [/*#__PURE__*/_jsx(Tab, {\n          label: \"1. Southern Zone\"\n        }), /*#__PURE__*/_jsx(Tab, {\n          label: \"2. Central Zone\"\n        }), /*#__PURE__*/_jsx(Tab, {\n          label: \"3. Northern Zone\"\n        })]\n      }), /*#__PURE__*/_jsx(TableContainer, {\n        children: /*#__PURE__*/_jsxs(Table, {\n          size: \"small\",\n          children: [/*#__PURE__*/_jsx(TableHead, {\n            children: /*#__PURE__*/_jsxs(TableRow, {\n              children: [/*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: \"Fragment\"\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: \"Actions\"\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: \"Count\"\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: \"Monster\"\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: \"Conditions\"\n              })]\n            })\n          }), /*#__PURE__*/_jsx(TableBody, {\n            children: bozja.drops[\"zone\".concat(tab + 1)].map(function (datum) {\n              return datum.loot;\n            }).sort(function (a, b) {\n              return a - b;\n            }).filter(function (loot, index, array) {\n              return loot !== array[index + 1];\n            }).map(function (loot) {\n              return bozja.drops[\"zone\".concat(tab + 1)].filter(function (datum) {\n                return datum.loot === loot;\n              }).sort(function (a, b) {\n                var aR = a.rank === 'S' ? 6 : a.rank;\n                var bR = b.rank === 'S' ? 6 : b.rank;\n                return aR === bR ? a.monster - b.monster : aR - bR;\n              }).map(function (datum, index, array) {\n                return /*#__PURE__*/_jsxs(TableRow, {\n                  children: [index === 0 && /*#__PURE__*/_jsxs(_Fragment, {\n                    children: [/*#__PURE__*/_jsx(TableCell, {\n                      rowSpan: array.length,\n                      align: \"center\",\n                      children: cleanFragment(translate(locale, bozja.items[loot], 'name'), locale)\n                    }), /*#__PURE__*/_jsx(TableCell, {\n                      rowSpan: array.length,\n                      children: loot !== 31135 && parseActions(translate(locale, bozja.items[loot], 'description'), locale)\n                    })]\n                  }), /*#__PURE__*/_jsxs(TableCell, {\n                    align: \"center\",\n                    children: [\"\\xD7\", datum.count.toLocaleString(locale)]\n                  }), /*#__PURE__*/_jsxs(TableCell, {\n                    children: [/*#__PURE__*/_jsx(RankIcon, {\n                      rank: datum.rank\n                    }), formatMonster(translate(locale, datum, 'name'), locale)]\n                  }), /*#__PURE__*/_jsx(TableCell, {\n                    align: \"center\",\n                    children: conditionMap[datum.condition]\n                  })]\n                }, index);\n              });\n            })\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport default DropsTable;","map":null,"metadata":{},"sourceType":"module"}