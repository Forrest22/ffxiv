{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport Grid from '@material-ui/core/Grid';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Alert from '@material-ui/lab/Alert';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport Section from '../Section';\nimport ForecasterTable from './ForecasterTable';\nimport { Region } from './weather/consts';\nimport { getSeed, getPossibleWeathers, forecastWeathers, translate } from './weather';\nimport PARTITION from './weather/regions-partition';\nimport { useTranslation } from '../i18n';\nvar REGIONS = [Region.LaNoscea, Region.TheBlackShroud, Region.Thanalan, Region.IshgardAndSurroundingAreas, Region.GyrAbania, Region.TheFarEast, Region.Norvrandt, Region.Others];\nvar ZONES_OPTIONS = [];\n\nfor (var _i = 0, _REGIONS = REGIONS; _i < _REGIONS.length; _i++) {\n  var region = _REGIONS[_i];\n\n  var _iterator = _createForOfIteratorHelper(PARTITION[region]),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var zone = _step.value;\n      ZONES_OPTIONS.push({\n        region: region,\n        zone: zone\n      });\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    transitionWeather: _defineProperty({}, theme.breakpoints.down('sm'), {\n      marginBottom: theme.spacing(2)\n    }),\n    transitionArrow: _defineProperty({\n      display: 'block',\n      margin: \"\".concat(theme.spacing(0.5), \"px auto\"),\n      fontSize: '2em'\n    }, theme.breakpoints.down('sm'), {\n      display: 'none'\n    })\n  };\n});\n\nvar Forecaster = function Forecaster(_ref) {\n  var now = _ref.now;\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('skywatcher'),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState = useState(null),\n      zoneOption = _useState[0],\n      setZoneOption = _useState[1];\n\n  var _useState2 = useState(null),\n      transitionWeather = _useState2[0],\n      setTransitionWeather = _useState2[1];\n\n  var _useState3 = useState(null),\n      targetWeather = _useState3[0],\n      setTargetWeather = _useState3[1];\n\n  var _useState4 = useState({\n    0: true,\n    8: true,\n    16: true\n  }),\n      times = _useState4[0],\n      setTimes = _useState4[1];\n\n  var possibleWeathers = zoneOption && getPossibleWeathers(zoneOption.zone);\n  var hasTime = times[0] || times[8] || times[16];\n  var forecast = zoneOption && hasTime && forecastWeathers(zoneOption.zone, function (prevWeather, currWeather, seed) {\n    if (transitionWeather && transitionWeather !== prevWeather) return false;\n    if (targetWeather && targetWeather !== currWeather) return false;\n    if (!times[0] && seed % 3 === 0) return false;\n    if (!times[8] && seed % 3 === 1) return false;\n    if (!times[16] && seed % 3 === 2) return false;\n    return true;\n  }, getSeed(now));\n  var locale = i18n.language;\n\n  var handleSelectZone = function handleSelectZone(_, zoneOption) {\n    setZoneOption(zoneOption);\n    setTransitionWeather(null);\n    setTargetWeather(null);\n  };\n\n  var handleSelectTransitionWeather = function handleSelectTransitionWeather(event) {\n    setTransitionWeather(event.target.value === 'none' ? null : event.target.value);\n  };\n\n  var handleSelectTargetWeather = function handleSelectTargetWeather(event) {\n    setTargetWeather(event.target.value === 'none' ? null : event.target.value);\n  };\n\n  var handleSelectTimes = function handleSelectTimes(timeSlot) {\n    setTimes(_objectSpread(_objectSpread({}, times), {}, _defineProperty({}, timeSlot, !times[timeSlot])));\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    title: t('forecaster'),\n    children: /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      spacing: 2,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsx(Autocomplete, {\n          options: ZONES_OPTIONS,\n          groupBy: function groupBy(_ref2) {\n            var region = _ref2.region;\n            return translate('region', region, locale);\n          },\n          getOptionLabel: function getOptionLabel(_ref3) {\n            var zone = _ref3.zone;\n            return translate('zone', zone, locale);\n          },\n          renderInput: function renderInput(params) {\n            return /*#__PURE__*/_jsx(TextField, _objectSpread(_objectSpread({}, params), {}, {\n              label: t('selectZone')\n            }));\n          },\n          value: zoneOption,\n          getOptionSelected: function getOptionSelected(option, value) {\n            return option.zone === value.zone;\n          },\n          onChange: handleSelectZone\n        })\n      }), /*#__PURE__*/_jsxs(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: [/*#__PURE__*/_jsxs(FormControl, {\n          fullWidth: true,\n          className: classes.transitionWeather,\n          children: [/*#__PURE__*/_jsx(InputLabel, {\n            children: t('transitionWeather')\n          }), /*#__PURE__*/_jsxs(Select, {\n            value: transitionWeather || 'none',\n            disabled: !zoneOption,\n            onChange: handleSelectTransitionWeather,\n            children: [/*#__PURE__*/_jsx(MenuItem, {\n              value: \"none\",\n              children: t(possibleWeathers ? 'anyWeather' : 'selectZoneFirst')\n            }), possibleWeathers && possibleWeathers.map(function (weather) {\n              return /*#__PURE__*/_jsx(MenuItem, {\n                value: weather,\n                children: translate('weather', weather, locale)\n              }, weather);\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(ArrowDownwardIcon, {\n          className: classes.transitionArrow\n        }), /*#__PURE__*/_jsxs(FormControl, {\n          fullWidth: true,\n          children: [/*#__PURE__*/_jsx(InputLabel, {\n            children: t('targetWeather')\n          }), /*#__PURE__*/_jsxs(Select, {\n            value: targetWeather || 'none',\n            disabled: !zoneOption,\n            onChange: handleSelectTargetWeather,\n            children: [/*#__PURE__*/_jsx(MenuItem, {\n              value: \"none\",\n              children: t(possibleWeathers ? 'anyWeather' : 'selectZoneFirst')\n            }), possibleWeathers && possibleWeathers.map(function (weather) {\n              return /*#__PURE__*/_jsx(MenuItem, {\n                value: weather,\n                children: translate('weather', weather, locale)\n              }, weather);\n            })]\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxs(FormControl, {\n          component: \"fieldset\",\n          children: [/*#__PURE__*/_jsx(FormLabel, {\n            component: \"legend\",\n            children: t('selectTimes')\n          }), /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(FormControlLabel, {\n              control: /*#__PURE__*/_jsx(Checkbox, {\n                checked: times[0],\n                onChange: handleSelectTimes.bind(null, 0)\n              }),\n              label: \"00:00\"\n            }), /*#__PURE__*/_jsx(FormControlLabel, {\n              control: /*#__PURE__*/_jsx(Checkbox, {\n                checked: times[8],\n                onChange: handleSelectTimes.bind(null, 8)\n              }),\n              label: \"08:00\"\n            }), /*#__PURE__*/_jsx(FormControlLabel, {\n              control: /*#__PURE__*/_jsx(Checkbox, {\n                checked: times[16],\n                onChange: handleSelectTimes.bind(null, 16)\n              }),\n              label: \"16:00\"\n            })]\n          })]\n        })\n      }), zoneOption && !hasTime && /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsx(Alert, {\n          variant: \"outlined\",\n          severity: \"error\",\n          children: t('noTimeSelected')\n        })\n      }), forecast && /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsx(NoSsr, {\n          children: /*#__PURE__*/_jsx(ForecasterTable, {\n            now: now,\n            forecast: forecast\n          })\n        })\n      })]\n    })\n  });\n};\n\nexport default Forecaster;","map":null,"metadata":{},"sourceType":"module"}