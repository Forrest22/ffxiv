{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MuiLink from '@material-ui/core/Link';\nimport Page from '../../src/Page';\nimport Section from '../../src/Section';\nimport Link from '../../src/Link';\nimport Highlight from '../../src/Highlight';\nimport { mathJaxRequire, $$ } from '../../src/MathJax';\nimport { useTranslation } from '../../src/i18n';\nconst useStyles = makeStyles(theme => ({\n  nestedList: {\n    listStyleType: 'none',\n    counterReset: 'counter',\n    '& li': {\n      position: 'relative',\n      marginTop: theme.spacing(0.5),\n      marginBottom: theme.spacing(0.5),\n      '&::before': {\n        position: 'absolute',\n        left: '-2em',\n        content: 'counters(counter, \".\") \".\"',\n        counterIncrement: 'counter'\n      }\n    }\n  },\n  code: {\n    padding: theme.spacing(0.2, 1)\n  }\n}));\n\nconst About = () => {\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation('ocean-fishing');\n  return /*#__PURE__*/_jsxs(Page, {\n    title: `${t('title')} - ${t('aboutPage.title')}`,\n    children: [mathJaxRequire('cancel'), /*#__PURE__*/_jsxs(Section, {\n      title: t('aboutPage.data'),\n      children: [/*#__PURE__*/_jsxs(Typography, {\n        paragraph: true,\n        children: [\"Data are taken from the \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://docs.google.com/spreadsheets/d/1brCfvmSdYl7RcY9lkgm_ds8uaFqq7qaxOOz-5BfHuuk/edit?usp=sharing\",\n          children: \"Ocean Fishing Spreadsheet\"\n        }), \" managed by S\\u2019yahn Tia. To report errors, please visit the \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://discord.gg/AnFaDpN\",\n          children: \"Fisherman\\u2019s Horizon Discord\"\n        }), \" or message Lulu Pillow@Adamantoise or Pillowfication#0538.\"]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        paragraph: true,\n        children: [\"Bite times are periodically fetched from \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://ffxivteamcraft.com/\",\n          children: \"Teamcraft\"\n        }), \" and cleaned up with the following process:\"]\n      }), /*#__PURE__*/_jsxs(\"ol\", {\n        className: classes.nestedList,\n        children: [/*#__PURE__*/_jsx(Typography, {\n          component: \"li\",\n          children: \"For each of the 14 fishing spots (non spectral and spectral) and for each of the 15 baits (mooches included), fetch all reports at the specified fishing spot with the specified bait.\"\n        }), /*#__PURE__*/_jsxs(Typography, {\n          component: \"li\",\n          children: [\"For each fish-bait combination, calculate the bite time range from the reports.\", /*#__PURE__*/_jsxs(\"ol\", {\n            className: classes.nestedList,\n            children: [/*#__PURE__*/_jsx(Typography, {\n              component: \"li\",\n              children: \"If there are fewer than 10 total reports, do not calculate the bite time range. (This tends to remove reports where fish are caught with the baits that should be impossible, or blue fish where too few reports are recorded)\"\n            }), /*#__PURE__*/_jsxs(Typography, {\n              component: \"li\",\n              children: [\"Otherwise, remove the top 5% and the bottom 5% of the reports. The minimum and maximum of the remaining reports is used as the bite time range. (This tends to remove outliers, like \", /*#__PURE__*/_jsx(MuiLink, {\n                href: \"https://media.discordapp.net/attachments/593471315319717888/797807850562912256/unknown.png\",\n                children: \"Godsbed taking 18 hours to catch\"\n              }), \")\"]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(Typography, {\n          component: \"li\",\n          children: \"For each fish, calculate the bite time range for all baits, excluding Versatile Lure.\"\n        })]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        paragraph: true,\n        children: [\"The bite times shown on the \", /*#__PURE__*/_jsx(Link, {\n          href: \"/ocean-fishing\",\n          children: \"Ocean Fishing page\"\n        }), \" are the bite time ranges for all baits. The bite time ranges for all baits can currently be found at \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://github.com/pillowfication/ffxiv/blob/master/src/ocean-fishing/ocean-fishing/data/bite-times.csv\",\n          children: \"bite-times.csv\"\n        }), \".\"]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        paragraph: true,\n        children: [\"All my data and the code I used are available on \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://github.com/pillowfication/ffxiv/tree/master/src/ocean-fishing/ocean-fishing\",\n          children: \"GitHub\"\n        }), \".\"]\n      })]\n    }), /*#__PURE__*/_jsxs(Section, {\n      title: t('aboutPage.algorithm'),\n      children: [/*#__PURE__*/_jsx(Typography, {\n        paragraph: true,\n        children: \"Ocean Fishing voyages follow a specific pattern best seen using Japan Standard Time (JST). Voyages leave every 2 hours on odd hours (at 1:00, 3:00, \\u2026, 23:00). The destination always cycles between the 4 destinations in the following order:\"\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: $$('\\\\cdots \\\\to \\\\text{Bloodbrine Sea} \\\\to \\\\text{Rothlyt Sound} \\\\to \\\\text{Northern Strait of Merlthor} \\\\to \\\\text{Rhotano Sea} \\\\to \\\\cdots')\n      }), /*#__PURE__*/_jsx(Typography, {\n        paragraph: true,\n        children: \"The 4 destinations will all be set to arrive at Day, then repeated to arrive at Sunset, then repeated to arrive at Night. There are 12 routes that I label as\"\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: $$(`\n            \\\\begin{array}{r|ccc}\n              & \\\\text{Day (D)} & \\\\text{Sunset (S)} & \\\\text{Night (N)} \\\\\\\\\n              \\\\hline\n              \\\\text{Bloodbrine Sea (B)} & \\\\text{BD} & \\\\text{BS} & \\\\text{BN} \\\\\\\\\n              \\\\text{Rothlyt Sound (T)} & \\\\text{TD} & \\\\text{TS} & \\\\text{TN} \\\\\\\\\n              \\\\text{Northern Strait of Merlthor (N)} & \\\\text{ND} & \\\\text{NS} & \\\\text{NN} \\\\\\\\\n              \\\\text{Rhotano Sea (R)} & \\\\text{RD} & \\\\text{RS} & \\\\text{RN} \\\\\\\\\n            \\\\end{array}\n          `)\n      }), /*#__PURE__*/_jsx(Typography, {\n        paragraph: true,\n        children: \"and they follow the sequence\"\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: $$(`\n            \\\\begin{array}{rcccccccccl}\n              \\\\cdots & \\\\to & \\\\text{BD} & \\\\to & \\\\text{TD} & \\\\to & \\\\text{ND} & \\\\to & \\\\text{RD} \\\\\\\\\n              & \\\\to & \\\\text{BS} & \\\\to & \\\\text{TS} & \\\\to & \\\\text{NS} & \\\\to & \\\\text{RS} \\\\\\\\\n              & \\\\to & \\\\text{BN} & \\\\to & \\\\text{TN} & \\\\to & \\\\text{NN} & \\\\to & \\\\text{RN} & \\\\to & \\\\cdots \\\\\\\\\n            \\\\end{array}\n          `)\n      }), /*#__PURE__*/_jsx(Typography, {\n        paragraph: true,\n        children: \"However, the first voyage of every day (at 1:00 JST) will skip a route. So there might be the schedule\"\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: $$(`\n            \\\\cdots\n            \\\\begin{array}{c|c}\n              \\\\text{19:00} & \\\\text{21:00} & \\\\text{23:00} & \\\\text{01:00} & \\\\text{03:00} & \\\\text{05:00} & \\\\text{07:00} \\\\\\\\\n              \\\\text{NS} & \\\\text{RS} & \\\\text{BN} & \\\\begin{array}{c}\\\\cancel{\\\\text{TN}} \\\\\\\\ \\\\text{NN}\\\\end{array} & \\\\text{RN} & \\\\text{BD} & \\\\text{TD} \\\\\\\\\n            \\\\end{array}\n            \\\\cdots\n          `)\n      }), /*#__PURE__*/_jsx(Typography, {\n        paragraph: true,\n        children: \"Since there are 12 routes and 12 voyages a day, the route that is skipped will cycle through all 12 routes in 12 days. The full pattern of routes is 144 routes long.\"\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: /*#__PURE__*/_jsx(Highlight, {\n          language: \"javascript\",\n          children: `\nconst PATTERN = [\n  'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN',\n  'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD',\n  'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD',\n  'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND',\n  'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD',\n  'TS', 'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS',\n  'NS', 'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS',\n  'RS', 'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS',\n  'BN', 'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS',\n  'TN', 'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN',\n  'NN', 'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN',\n  'RN', 'BD', 'TD', 'ND', 'RD', 'BS', 'TS', 'NS', 'RS', 'BN', 'TN', 'NN'\n]\n            `.trim()\n        })\n      }), /*#__PURE__*/_jsxs(Typography, {\n        paragraph: true,\n        children: [\"To figure out the route at a given time, we need to first establish some epoch as the first voyage and determine where in \", /*#__PURE__*/_jsx(Paper, {\n          component: \"code\",\n          variant: \"outlined\",\n          className: classes.code,\n          children: \"PATTERN\"\n        }), \" that voyage lies. All other routes will be calculated relative to that epoch. Fortunately, JST is UTC+09:00, which means a voyage lands on the \", /*#__PURE__*/_jsx(MuiLink, {\n          href: \"https://www.wikiwand.com/en/Unix_time\",\n          children: \"Unix epoch\"\n        }), \". As it turns out, this voyage is index 88 in \", /*#__PURE__*/_jsx(Paper, {\n          component: \"code\",\n          variant: \"outlined\",\n          className: classes.code,\n          children: \"PATTERN\"\n        }), \". Altogether,\"]\n      }), /*#__PURE__*/_jsx(Box, {\n        mb: 2,\n        children: /*#__PURE__*/_jsx(Highlight, {\n          language: \"typescript\",\n          children: `\nconst TWO_HOURS = 2 * 60 * 60 * 1000\nconst OFFSET = 88\n\n/**\n * Returns the route of the ongoing/most recent voyage.\n */\nfunction getRoute (date: Date) {\n  // Get the number of voyages since 00:00:00 UTC, 1 January 1970\n  const voyageNumber = Math.floor(date.getTime() / TWO_HOURS)\n\n  // Get where it lies in the pattern\n  const route = PATTERN[(OFFSET + voyageNumber) % PATTERN.length]\n\n  return route\n}\n            `.trim()\n        })\n      })]\n    })]\n  });\n};\n\nAbout.getInitialProps = async () => ({\n  namespacesRequired: ['common', 'ocean-fishing']\n});\n\nexport default About;","map":null,"metadata":{},"sourceType":"module"}