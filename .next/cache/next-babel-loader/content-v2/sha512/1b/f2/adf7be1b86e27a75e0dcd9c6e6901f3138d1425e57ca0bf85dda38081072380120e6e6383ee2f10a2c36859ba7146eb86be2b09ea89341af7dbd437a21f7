{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckIcon from '@material-ui/icons/Check';\nimport Page from '../../src/Page';\nimport Section from '../../src/Section';\nimport OceanFishIcon from '../../src/ocean-fishing/OceanFishIcon';\nimport { contentBonuses } from '../../src/ocean-fishing/ffxiv-ocean-fishing/data';\nimport { translate } from '../../src/utils';\nimport { useTranslation } from '../../src/i18n';\nvar CONTENT_BONUSES = Object.values(contentBonuses).sort(function (a, b) {\n  return a.order - b.order;\n}).filter(function (contentBonus) {\n  return !/Target number adjusted for party size/.test(contentBonus.requirement_en);\n});\nvar useStyles = makeStyles(function (theme) {\n  return {\n    contentBonusesTable: {\n      '& th': {\n        padding: theme.spacing(1, 2)\n      },\n      '& td': {\n        padding: theme.spacing(0.5, 1)\n      }\n    },\n    check: {\n      padding: 10\n    },\n    unchecked: {\n      opacity: 0.4\n    },\n    checked: {\n      color: 'green'\n    },\n    bonusContainer: {\n      margin: theme.spacing(2, 0),\n      paddingBottom: theme.spacing(4),\n      textAlign: 'center',\n      '& > *': {\n        display: 'inline-block',\n        verticalAlign: 'middle'\n      }\n    },\n    bonus: {\n      position: 'relative'\n    },\n    bonusPercentage: {\n      position: 'absolute',\n      left: 0,\n      right: 0\n    },\n    bigger: {\n      fontSize: '1.5em'\n    },\n    calculatorGoal: {\n      textAlign: 'justify',\n      textAlignLast: 'justify',\n      '& > *': {\n        display: 'inline-block'\n      }\n    }\n  };\n});\n\nfunction getOverrides(contentBonusId) {\n  switch (contentBonusId) {\n    case 2:\n      return [1];\n\n    case 6:\n      return [5];\n\n    case 18:\n      return [17];\n\n    case 19:\n      return [17, 18];\n\n    default:\n      return [];\n  }\n}\n\nfunction getOverriddenBy(contentBonusId) {\n  switch (contentBonusId) {\n    case 1:\n      return [2];\n\n    case 5:\n      return [6];\n\n    case 17:\n      return [18, 19];\n\n    case 18:\n      return [19];\n\n    default:\n      return [];\n  }\n}\n\nfunction cleanObjective(objective) {\n  return objective.replace(/<[^<>]*?\\/>/g, '');\n}\n\nfunction cleanRequirement(requirement) {\n  var str = requirement.replace(/^(Requirement:|Bedingung:|Condition :|達成条件：)/, '').trim();\n  return str[0].toUpperCase() + str.slice(1);\n}\n\nvar Objectives = function Objectives() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('ocean-fishing'),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState = useState(5000),\n      basePoints = _useState[0],\n      setBasePoints = _useState[1];\n\n  var _useState2 = useState({\n    1: true,\n    2: true,\n    3: true,\n    5: true,\n    7: true,\n    8: true,\n    9: true,\n    17: true,\n    18: true,\n    19: true\n  }),\n      checked = _useState2[0],\n      setChecked = _useState2[1];\n\n  var locale = i18n.language;\n  var filteredContentBonuses = CONTENT_BONUSES.filter(function (contentBonus) {\n    if (!checked[contentBonus.id]) return false;\n\n    var _iterator = _createForOfIteratorHelper(getOverriddenBy(contentBonus.id)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var override = _step.value;\n        if (checked[override]) return false;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return true;\n  });\n  var totalBonus = filteredContentBonuses.reduce(function (acc, curr) {\n    return acc + curr.bonus - 100;\n  }, 0) + 100;\n\n  var handleClickChecked = function handleClickChecked(contentBonusId) {\n    var newChecked = _objectSpread(_objectSpread({}, checked), {}, _defineProperty({}, contentBonusId, !checked[contentBonusId]));\n\n    if (newChecked[contentBonusId]) {\n      getOverrides(contentBonusId).forEach(function (contentBonus) {\n        newChecked[contentBonus] = true;\n      });\n    } else {\n      getOverriddenBy(contentBonusId).forEach(function (contentBonus) {\n        newChecked[contentBonus] = false;\n      });\n    }\n\n    setChecked(newChecked);\n  };\n\n  var handleInputBasePoints = function handleInputBasePoints(event) {\n    setBasePoints(Math.max(0, Number(event.target.value)));\n  };\n\n  return /*#__PURE__*/_jsxs(Page, {\n    title: \"\".concat(t('title'), \" - \").concat(t('objectivesPage.title')),\n    children: [/*#__PURE__*/_jsx(Section, {\n      children: /*#__PURE__*/_jsx(TableContainer, {\n        children: /*#__PURE__*/_jsxs(Table, {\n          className: classes.contentBonusesTable,\n          children: [/*#__PURE__*/_jsx(TableHead, {\n            children: /*#__PURE__*/_jsxs(TableRow, {\n              children: [/*#__PURE__*/_jsx(TableCell, {\n                colSpan: 3,\n                align: \"center\",\n                children: t('objectivesPage.objective')\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: t('objectivesPage.requirement')\n              }), /*#__PURE__*/_jsx(TableCell, {\n                align: \"center\",\n                children: t('objectivesPage.bonus')\n              })]\n            })\n          }), /*#__PURE__*/_jsx(TableBody, {\n            children: CONTENT_BONUSES.map(function (contentBonus) {\n              return /*#__PURE__*/_jsxs(TableRow, {\n                children: [/*#__PURE__*/_jsx(TableCell, {\n                  children: /*#__PURE__*/_jsx(IconButton, {\n                    className: clsx(classes.check, checked[contentBonus.id] ? classes.checked : classes.unchecked),\n                    onClick: handleClickChecked.bind(null, contentBonus.id),\n                    children: /*#__PURE__*/_jsx(CheckIcon, {})\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  children: /*#__PURE__*/_jsx(OceanFishIcon, {\n                    type: \"content-bonus\",\n                    id: contentBonus.id\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    children: cleanObjective(translate(locale, contentBonus, 'objective'))\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  children: /*#__PURE__*/_jsx(Typography, {\n                    children: cleanRequirement(translate(locale, contentBonus, 'requirement'))\n                  })\n                }), /*#__PURE__*/_jsx(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxs(Typography, {\n                    children: [contentBonus.bonus - 100, \"%\"]\n                  })\n                })]\n              }, contentBonus.id);\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Section, {\n      title: t('objectivesPage.calculator'),\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classes.bonusContainer,\n        children: [filteredContentBonuses.length > 0 ? filteredContentBonuses.map(function (contentBonus) {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            className: classes.bonus,\n            children: [/*#__PURE__*/_jsx(OceanFishIcon, {\n              type: \"content-bonus\",\n              id: contentBonus.id\n            }, contentBonus.id), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(Typography, {\n              variant: \"body2\",\n              className: classes.bonusPercentage,\n              children: [contentBonus.bonus - 100, \"%\"]\n            })]\n          });\n        }) : /*#__PURE__*/_jsx(Typography, {\n          children: \"No contentBonuses selected\"\n        }), /*#__PURE__*/_jsxs(Typography, {\n          className: classes.bigger,\n          children: [\"\\xA0= \", totalBonus - 100, \"%\"]\n        })]\n      }), /*#__PURE__*/_jsx(Grid, {\n        container: true,\n        justify: \"center\",\n        children: /*#__PURE__*/_jsx(Grid, {\n          item: true,\n          xs: 12,\n          md: 8,\n          children: /*#__PURE__*/_jsxs(Grid, {\n            container: true,\n            spacing: 2,\n            alignItems: \"flex-end\",\n            children: [/*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsx(TextField, {\n                type: \"number\",\n                fullWidth: true,\n                label: t('objectivesPage.basePoints'),\n                InputProps: {\n                  endAdornment: /*#__PURE__*/_jsxs(InputAdornment, {\n                    position: \"end\",\n                    children: [\"\\xD7\", totalBonus, \"%\"]\n                  })\n                },\n                value: basePoints,\n                onChange: handleInputBasePoints\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxs(Typography, {\n                className: classes.bigger,\n                children: [\"= \", Math.floor(basePoints * totalBonus / 100).toLocaleString(locale)]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(Box, {\n                m: 2\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: classes.calculatorGoal,\n                children: [/*#__PURE__*/_jsx(Typography, {\n                  children: \"The Major-General\"\n                }), \"\\xA0\", /*#__PURE__*/_jsxs(Typography, {\n                  component: \"div\",\n                  align: \"right\",\n                  className: classes.bigger,\n                  children: [Math.ceil(5000 / totalBonus * 100).toLocaleString(locale), /*#__PURE__*/_jsx(Box, {\n                    display: \"inline\",\n                    ml: 2,\n                    children: /*#__PURE__*/_jsxs(Typography, {\n                      display: \"inline\",\n                      children: [\"\\xD7\", totalBonus, \"%\"]\n                    })\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxs(Typography, {\n                className: classes.bigger,\n                children: [\"= \", 5000 .toLocaleString(locale)]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: classes.calculatorGoal,\n                children: [/*#__PURE__*/_jsx(Typography, {\n                  children: \"Hybodus\"\n                }), \"\\xA0\", /*#__PURE__*/_jsxs(Typography, {\n                  component: \"div\",\n                  align: \"right\",\n                  className: classes.bigger,\n                  children: [Math.ceil(10000 / totalBonus * 100).toLocaleString(locale), /*#__PURE__*/_jsx(Box, {\n                    display: \"inline\",\n                    ml: 2,\n                    children: /*#__PURE__*/_jsxs(Typography, {\n                      display: \"inline\",\n                      children: [\"\\xD7\", totalBonus, \"%\"]\n                    })\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxs(Typography, {\n                className: classes.bigger,\n                children: [\"= \", 10000 .toLocaleString(locale)]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: classes.calculatorGoal,\n                children: [/*#__PURE__*/_jsx(Typography, {\n                  children: \"\\u201COcean Fisher\\u201D\"\n                }), \"\\xA0\", /*#__PURE__*/_jsxs(Typography, {\n                  component: \"div\",\n                  align: \"right\",\n                  className: classes.bigger,\n                  children: [Math.ceil(16000 / totalBonus * 100).toLocaleString(locale), /*#__PURE__*/_jsx(Box, {\n                    display: \"inline\",\n                    ml: 2,\n                    children: /*#__PURE__*/_jsxs(Typography, {\n                      display: \"inline\",\n                      children: [\"\\xD7\", totalBonus, \"%\"]\n                    })\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxs(Typography, {\n                className: classes.bigger,\n                children: [\"= \", 16000 .toLocaleString(locale)]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: classes.calculatorGoal,\n                children: [/*#__PURE__*/_jsx(Typography, {\n                  children: \"\\u201CMaster of the Sea\\u201D\"\n                }), \"\\xA0\", /*#__PURE__*/_jsxs(Typography, {\n                  component: \"div\",\n                  align: \"right\",\n                  className: classes.bigger,\n                  children: [Math.ceil(20000 / totalBonus * 100).toLocaleString(locale), /*#__PURE__*/_jsx(Box, {\n                    display: \"inline\",\n                    ml: 2,\n                    children: /*#__PURE__*/_jsxs(Typography, {\n                      display: \"inline\",\n                      children: [\"\\xD7\", totalBonus, \"%\"]\n                    })\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxs(Typography, {\n                className: classes.bigger,\n                children: [\"= \", 20000 .toLocaleString(locale)]\n              })\n            })]\n          })\n        })\n      })]\n    })]\n  });\n};\n\nObjectives.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", {\n            namespacesRequired: ['common', 'ocean-fishing']\n          });\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default Objectives;","map":null,"metadata":{},"sourceType":"module"}