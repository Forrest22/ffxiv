{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Alert from '@material-ui/lab/Alert';\nimport { ChecklistContext } from './index';\nimport Page from '../../src/Page';\nimport Section from '../../src/Section';\nimport FishTable from '../../src/ocean-fishing/FishTable';\nimport { fishingSpots, placeNames } from '../../src/ocean-fishing/ffxiv-ocean-fishing/data';\nimport { translate } from '../../src/utils';\nimport { useTranslation } from '../../src/i18n';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    container: {\n      backgroundColor: theme.palette.type === 'light' && theme.palette.grey[200]\n    },\n    buttons: {\n      '& button': {\n        margin: theme.spacing(1, 0)\n      }\n    }\n  };\n});\n\nvar ImportData = function ImportData(_ref) {\n  var setChecklist = _ref.setChecklist;\n  var classes = useStyles();\n\n  var _useState = useState(''),\n      importData = _useState[0],\n      setImportData = _useState[1];\n\n  var _useState2 = useState(null),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var handleInputImportData = function handleInputImportData(event) {\n    setImportData(event.target.value);\n  };\n\n  var handleClickImport = function handleClickImport() {\n    try {\n      var data = JSON.parse(importData);\n\n      if (Array.isArray(data)) {\n        setChecklist(data);\n        setMessage({\n          type: 'success',\n          message: \"Imported \".concat(data.length, \" fishes.\")\n        });\n      } else if (Array.isArray(data.completed)) {\n        setChecklist(data.completed);\n        setMessage({\n          type: 'success',\n          message: \"Imported \".concat(data.completed.length, \" fishes.\")\n        });\n      } else {\n        setMessage({\n          type: 'error',\n          message: 'Could not parse data.'\n        });\n      }\n    } catch (_) {\n      setMessage({\n        type: 'error',\n        message: 'Could not parse data.'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsxs(Box, {\n      component: Paper,\n      p: 2,\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxs(Typography, {\n        children: [\"Paste code from \", /*#__PURE__*/_jsx(Link, {\n          href: \"https://lalachievements.com/\",\n          children: \"Lalachievements\"\n        }), \" or \", /*#__PURE__*/_jsx(Link, {\n          href: \"https://ff14fish.carbuncleplushy.com/\",\n          children: \"FFX|V Fish Tracker App\"\n        }), \" below.\"]\n      }), /*#__PURE__*/_jsx(TextField, {\n        multiline: true,\n        fullWidth: true,\n        variant: \"outlined\",\n        rows: 4,\n        margin: \"normal\",\n        value: importData,\n        onChange: handleInputImportData\n      }), message && /*#__PURE__*/_jsx(Alert, {\n        variant: \"outlined\",\n        severity: message.type,\n        children: message.message\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: classes.buttons,\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleClickImport,\n          children: \"Import\"\n        })\n      })]\n    })\n  });\n};\n\nvar Fish = function Fish() {\n  var _useTranslation = useTranslation('ocean-fishing'),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var _useState3 = useState([]),\n      checklist = _useState3[0],\n      setChecklist = _useState3[1];\n\n  var _useState4 = useState(false),\n      showImport = _useState4[0],\n      setShowImport = _useState4[1];\n\n  useEffect(function () {\n    if (true) {\n      var data = window.localStorage.getItem('ocean-fishing/checklist');\n\n      if (data) {\n        setChecklist(data.split(',').map(function (x) {\n          return Number(x) | 0;\n        }).filter(function (x) {\n          return x;\n        }));\n      }\n    }\n  }, []);\n  useEffect(function () {\n    window.localStorage.setItem('ocean-fishing/checklist', checklist.join(','));\n  }, [checklist]);\n\n  var toggleShowImport = function toggleShowImport() {\n    setShowImport(!showImport);\n  };\n\n  return /*#__PURE__*/_jsx(Page, {\n    title: \"\".concat(t('title'), \" - \").concat(t('fishPage.title')),\n    children: /*#__PURE__*/_jsxs(ChecklistContext.Provider, {\n      value: {\n        checklist: checklist,\n        setChecklist: setChecklist\n      },\n      children: [/*#__PURE__*/_jsxs(Section, {\n        children: [/*#__PURE__*/_jsxs(Typography, {\n          paragraph: true,\n          children: [\"Data are taken from the \", /*#__PURE__*/_jsx(Link, {\n            href: \"https://docs.google.com/spreadsheets/d/1brCfvmSdYl7RcY9lkgm_ds8uaFqq7qaxOOz-5BfHuuk/edit?usp=sharing\",\n            children: \"Ocean Fishing Spreadsheet\"\n          }), \" managed by S\\u2019yahn Tia. Bite times are from \", /*#__PURE__*/_jsx(Link, {\n            href: \"https://ffxivteamcraft.com/\",\n            children: \"Teamcraft\"\n          }), \" when available. For questions/comments/corrections, please visit the \", /*#__PURE__*/_jsx(Link, {\n            href: \"https://discord.gg/AnFaDpN\",\n            children: \"Fisherman\\u2019s Horizon Discord\"\n          }), \" or message Lulu Pillow@Adamantoise or Pillowfication#0538.\"]\n        }), /*#__PURE__*/_jsxs(Typography, {\n          paragraph: true,\n          children: [\"I\\u2019ve also made a Chrome Extension for adding ocean fishes to the \", /*#__PURE__*/_jsx(Link, {\n            href: \"https://ff14fish.carbuncleplushy.com/\",\n            children: \"Carbuncle Plushy FFX|V Fish Tracker App\"\n          }), \" available on the \", /*#__PURE__*/_jsx(Link, {\n            href: \"https://chrome.google.com/webstore/detail/add-ocean-fish-to-ff14-fi/oihefgmncbnicjmcdccjflagboaidenh\",\n            children: \"Chrome Web Store\"\n          }), \".\"]\n        }), /*#__PURE__*/_jsx(Button, {\n          variant: \"contained\",\n          onClick: toggleShowImport,\n          children: \"Import Fishes\"\n        })]\n      }), /*#__PURE__*/_jsx(Collapse, {\n        \"in\": showImport,\n        children: /*#__PURE__*/_jsx(ImportData, {\n          setChecklist: setChecklist\n        })\n      }), Object.values(fishingSpots).sort(function (a, b) {\n        return a.id - b.id;\n      }).map(function (fishingSpot) {\n        return /*#__PURE__*/_jsx(Section, {\n          title: translate(i18n.language, placeNames[fishingSpot.placeName], 'name'),\n          children: /*#__PURE__*/_jsx(FishTable, {\n            spots: [fishingSpot.id]\n          })\n        }, fishingSpot.id);\n      })]\n    })\n  });\n};\n\nFish.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", {\n            namespacesRequired: ['common', 'ocean-fishing']\n          });\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default Fish;","map":null,"metadata":{},"sourceType":"module"}