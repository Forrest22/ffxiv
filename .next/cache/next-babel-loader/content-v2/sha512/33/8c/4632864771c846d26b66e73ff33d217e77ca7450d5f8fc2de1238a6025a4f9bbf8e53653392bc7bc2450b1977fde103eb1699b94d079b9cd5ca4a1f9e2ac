{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport MuiLink from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Link from '../../src/Link';\nimport Page from '../../src/Page';\nimport Section from '../../src/Section';\nimport UpcomingVoyages from '../../src/ocean-fishing/UpcomingVoyages';\nimport RouteInformation from '../../src/ocean-fishing/RouteInformation';\nimport AchievementsInformation from '../../src/ocean-fishing/AchievementsInformation';\nimport { useTranslation } from '../../src/i18n';\nexport var ChecklistContext = /*#__PURE__*/React.createContext({\n  checklist: [],\n  setChecklist: function setChecklist() {}\n});\nvar useStyles = makeStyles(function (theme) {\n  return {\n    buttons: {\n      textAlign: 'center',\n      marginBottom: theme.spacing(2),\n      '& > *': {\n        margin: theme.spacing(1),\n        color: theme.palette.text.primary,\n        textTransform: 'none',\n        '&:hover': {\n          textDecoration: 'none'\n        }\n      }\n    }\n  };\n});\n\nvar OceanFishing = function OceanFishing() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('ocean-fishing'),\n      t = _useTranslation.t;\n\n  var _useState = useState(new Date()),\n      now = _useState[0],\n      setNow = _useState[1];\n\n  var _useState2 = useState(null),\n      selectedRoute = _useState2[0],\n      setSelectedRoute = _useState2[1]; // This is initialized when UpcomingVoyages is mounted\n\n\n  var _useState3 = useState([]),\n      checklist = _useState3[0],\n      setChecklist = _useState3[1];\n\n  useEffect(function () {\n    var interval;\n\n    (function loop() {\n      var now = new Date();\n      setNow(now);\n      interval = setTimeout(loop, 60000 - now.getTime() % 60000);\n    })();\n\n    if (true) {\n      var data = window.localStorage.getItem('ocean-fishing/checklist');\n\n      if (data) {\n        setChecklist(data.split(',').map(function (x) {\n          return Number(x) | 0;\n        }).filter(function (x) {\n          return x;\n        }));\n      }\n    }\n\n    return function () {\n      clearTimeout(interval);\n    };\n  }, []);\n  useEffect(function () {\n    window.localStorage.setItem('ocean-fishing/checklist', checklist.join(','));\n  }, [checklist]);\n  return /*#__PURE__*/_jsx(Page, {\n    title: t('title'),\n    description: \"Schedule for upcoming ocean fishing voyages with information on blue fish, achievements, and more.\",\n    children: /*#__PURE__*/_jsxs(ChecklistContext.Provider, {\n      value: {\n        checklist: checklist,\n        setChecklist: setChecklist\n      },\n      children: [/*#__PURE__*/_jsxs(Section, {\n        children: [/*#__PURE__*/_jsxs(Typography, {\n          paragraph: true,\n          children: [\"Data are taken from the \", /*#__PURE__*/_jsx(MuiLink, {\n            href: \"https://docs.google.com/spreadsheets/d/1brCfvmSdYl7RcY9lkgm_ds8uaFqq7qaxOOz-5BfHuuk/edit?usp=sharing\",\n            children: \"Ocean Fishing Spreadsheet\"\n          }), \" managed by S\\u2019yahn Tia. Bite times are from \", /*#__PURE__*/_jsx(MuiLink, {\n            href: \"https://ffxivteamcraft.com/\",\n            children: \"Teamcraft\"\n          }), \" when available. For questions/comments/corrections, please visit the \", /*#__PURE__*/_jsx(MuiLink, {\n            href: \"https://discord.gg/AnFaDpN\",\n            children: \"Fisherman\\u2019s Horizon Discord\"\n          }), \" or message Lulu Pillow@Adamantoise or Pillowfication#0538.\"]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.buttons,\n          children: [/*#__PURE__*/_jsx(Button, {\n            component: Link,\n            variant: \"contained\",\n            href: \"/ocean-fishing/about\",\n            children: /*#__PURE__*/_jsx(Typography, {\n              children: t('aboutPage.title')\n            })\n          }), /*#__PURE__*/_jsx(Button, {\n            component: Link,\n            variant: \"contained\",\n            href: \"/ocean-fishing/fish\",\n            children: /*#__PURE__*/_jsx(Typography, {\n              children: t('fishPage.title')\n            })\n          }), /*#__PURE__*/_jsx(Button, {\n            component: Link,\n            variant: \"contained\",\n            href: \"/ocean-fishing/objectives\",\n            children: /*#__PURE__*/_jsx(Typography, {\n              children: t('objectivesPage.title')\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(UpcomingVoyages, {\n        now: now,\n        onSelectRoute: setSelectedRoute\n      }), selectedRoute && /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(RouteInformation, {\n          now: now,\n          selectedRoute: selectedRoute\n        }), /*#__PURE__*/_jsx(AchievementsInformation, {\n          selectedRoute: selectedRoute\n        })]\n      })]\n    })\n  });\n};\n\nOceanFishing.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", {\n            namespacesRequired: ['common', 'ocean-fishing']\n          });\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default OceanFishing;","map":null,"metadata":{},"sourceType":"module"}