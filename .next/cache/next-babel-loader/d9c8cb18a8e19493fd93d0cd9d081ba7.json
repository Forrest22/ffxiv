{"ast":null,"code":"import _toConsumableArray from \"/root/ffxiv/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { timeUntil as genericTimeUntil } from '../utils';\nimport { fishes, baits } from './gists/data/ocean-fish-data.json';\nimport spreadsheet from './gists/data/spreadsheet-data.json';\nimport biteTimes from './gists/data/ocean-fish-bite-times.json';\nimport * as maps from './maps';\n\nfunction memoize(func) {\n  var cache = {};\n  return function (arg) {\n    var key = String(arg);\n    return cache[key] !== undefined ? cache[key] : cache[key] = func(arg);\n  };\n}\n\nexport function timeUntil(now, then, full) {\n  var diff = then.getTime() - now.getTime();\n\n  if (diff < -900000) {\n    return 'en route';\n  } else if (diff < 0) {\n    return 'boarding now';\n  } else {\n    return genericTimeUntil(now, then, full);\n  }\n}\nexport function getStops(destinationCode) {\n  var stops = maps.STOPS_SEQUENCE[destinationCode[0]];\n  var times = maps.TIMES_SEQUENCE[destinationCode[1]];\n  return [stops[0] + times[0], stops[1] + times[1], stops[2] + times[2]];\n}\nexport function getBlueFish(destinationCode) {\n  var stopTimes = getStops(destinationCode);\n  return stopTimes.map(function (destinationStopTime) {\n    return maps.BLUE_FISH_MAP[destinationStopTime[0]];\n  }).map(function (fishId, index) {\n    var time = stopTimes[index][1];\n    var fishInfo = getFishInfo(fishes[fishId].name_en);\n    return fishInfo.time && fishInfo.time.indexOf(time) > -1 ? fishId : null;\n  });\n}\nexport var getFishInfo = memoize(function (fishName) {\n  // @ts-ignore\n  var fishInfo = Object.values(spreadsheet).flat().find(function (fishInfo) {\n    return fishInfo.name === fishName;\n  });\n  if (!fishInfo) return null;\n  var biteTime = biteTimes[getFish(fishName).id];\n\n  if (biteTimes) {\n    fishInfo.timer = biteTime;\n  }\n\n  return fishInfo;\n});\nexport var getFish = memoize(function (fishName) {\n  return Object.values(fishes).find(function (fish) {\n    return fish.name_en === fishName;\n  }) || null;\n});\nexport var getBait = memoize(function (baitName) {\n  return Object.values(baits).find(function (bait) {\n    return bait.name_en === baitName;\n  }) || null;\n});\nexport var getBaitChain = memoize(function _getBaitChain(fishId) {\n  var fishInfo = getFishInfo(fishes[fishId].name_en);\n  return fishInfo.bait ? [getBait(fishInfo.bait), {\n    id: fishId,\n    tug: fishInfo.tug,\n    doubleHook: fishInfo.doubleHook\n  }] : [].concat(_toConsumableArray(_getBaitChain(getFish(fishInfo.mooch).id)), [{\n    id: fishId,\n    tug: fishInfo.tug,\n    doubleHook: fishInfo.doubleHook\n  }]);\n});\nexport var getBaitGroup = memoize(function (fishId) {\n  var fishInfo = getFishInfo(fishes[fishId].name_en);\n  return {\n    bait: getBaitChain(fishId),\n    intuitionFishes: fishInfo.intuition && fishInfo.intuition.map(function (intuitionFish) {\n      return {\n        bait: getBaitChain(getFish(intuitionFish.name).id),\n        count: intuitionFish.count\n      };\n    })\n  };\n});\nexport function translate(obj, attr) {\n  var locale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'en';\n  return obj[\"\".concat(attr, \"_\").concat(locale)] || obj[attr] || \"{\".concat(obj.name || obj.id, \".\").concat(attr, \"}\");\n}","map":null,"metadata":{},"sourceType":"module"}