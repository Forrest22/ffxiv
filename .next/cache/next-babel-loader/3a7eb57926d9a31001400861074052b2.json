{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LINES, validateGrid, getSuggestion } from './calculate-mini-cactpot';\nimport Section from '../Section';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport CalculatorCell from './CalculatorCell';\nimport CalculatorLineIndicator from './CalculatorLineIndicator';\nconst useStyles = makeStyles(theme => ({\n  gridShrink: {\n    textAlign: 'center',\n    [theme.breakpoints.up('md')]: {\n      flex: '0 0 auto'\n    }\n  },\n  gridGrow: {\n    [theme.breakpoints.up('md')]: {\n      flex: '1 1 0px'\n    }\n  },\n  cellsContainer: {\n    display: 'inline-block',\n    border: theme.palette.type === 'dark' ? '1px solid gray' : '1px solid black'\n  },\n  suggestion: {\n    [theme.breakpoints.up('md')]: {\n      paddingTop: theme.spacing(8)\n    }\n  }\n}));\n\nconst Calculator = () => {\n  const {\n    0: grid,\n    1: setGrid\n  } = useState(Array(9).fill(null));\n  const classes = useStyles();\n\n  const handleInputDigit = (cellIndex, digit) => {\n    const newGrid = grid.slice();\n    newGrid[cellIndex] = digit;\n    setGrid(newGrid);\n  };\n\n  const handleClickReset = event => {\n    setGrid(Array(9).fill(null));\n  };\n\n  const error = validateGrid(grid);\n  const errorCells = {};\n\n  if (error) {\n    switch (error.type) {\n      case 'TOO MANY':\n      case 'DUPLICATES':\n        for (const cellIndex of error.cells) {\n          errorCells[cellIndex] = true;\n        }\n\n        break;\n    }\n  }\n\n  const suggestion = !error && getSuggestion(grid);\n  const suggestedCells = {};\n\n  if (suggestion) {\n    switch (suggestion.type) {\n      case 'CELL':\n        for (const cellIndex of suggestion.maxCellLocations) {\n          suggestedCells[cellIndex] = true;\n        }\n\n        break;\n\n      case 'LINE':\n        for (const lineId of suggestion.maxLineIds) {\n          for (const cellIndex of LINES[lineId]) {\n            suggestedCells[cellIndex] = true;\n          }\n        }\n\n    }\n  }\n\n  function isLineSuggested(lineId) {\n    return suggestion && suggestion.type === 'LINE' && suggestion.maxLineIds.includes(lineId);\n  }\n\n  return /*#__PURE__*/_jsx(Section, {\n    children: /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      spacing: 4,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.gridShrink,\n        children: /*#__PURE__*/_jsx(\"table\", {\n          children: /*#__PURE__*/_jsxs(\"tbody\", {\n            children: [/*#__PURE__*/_jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 45,\n                  suggested: isLineSuggested(3)\n                })\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 90,\n                  suggested: isLineSuggested(4)\n                })\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 90,\n                  suggested: isLineSuggested(5)\n                })\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 90,\n                  suggested: isLineSuggested(6)\n                })\n              }), /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 135,\n                  suggested: isLineSuggested(7)\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 0,\n                  suggested: isLineSuggested(2)\n                })\n              }), /*#__PURE__*/_jsx(\"td\", {\n                rowSpan: 3,\n                colSpan: 3,\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: classes.cellsContainer,\n                  children: [0, 1, 2, null, 3, 4, 5, null, 6, 7, 8].map((cellIndex, index) => cellIndex !== null ? /*#__PURE__*/_jsx(CalculatorCell, {\n                    value: grid[cellIndex],\n                    suggested: suggestedCells[cellIndex],\n                    error: errorCells[cellIndex],\n                    onInputDigit: handleInputDigit.bind(null, cellIndex)\n                  }, index) : /*#__PURE__*/_jsx(\"br\", {}, index))\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"tr\", {\n              children: /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 0,\n                  suggested: isLineSuggested(1)\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"tr\", {\n              children: /*#__PURE__*/_jsx(\"td\", {\n                children: /*#__PURE__*/_jsx(CalculatorLineIndicator, {\n                  rotate: 0,\n                  suggested: isLineSuggested(0)\n                })\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.gridGrow,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.suggestion,\n          children: [(() => {\n            if (error) {\n              switch (error.type) {\n                case 'EMPTY':\n                  return /*#__PURE__*/_jsx(Typography, {\n                    paragraph: true,\n                    children: \"Click on a square to enter a digit.\"\n                  });\n\n                case 'TOO MANY':\n                  return /*#__PURE__*/_jsx(Typography, {\n                    paragraph: true,\n                    children: \"Too many cells have been filled!\"\n                  });\n\n                case 'DUPLICATES':\n                  return /*#__PURE__*/_jsx(Typography, {\n                    paragraph: true,\n                    children: \"Cells cannot repeat digits!\"\n                  });\n              }\n            } else {\n              switch (suggestion.type) {\n                case 'CELL':\n                  return /*#__PURE__*/_jsxs(_Fragment, {\n                    children: [/*#__PURE__*/_jsxs(Typography, {\n                      children: [/*#__PURE__*/_jsx(\"b\", {\n                        children: \"Expected value:\"\n                      }), \" \", suggestion.maxCellEV | 0]\n                    }), /*#__PURE__*/_jsx(Typography, {\n                      paragraph: true,\n                      children: \"Reveal a highlighted square.\"\n                    })]\n                  });\n\n                case 'LINE':\n                  return /*#__PURE__*/_jsxs(_Fragment, {\n                    children: [/*#__PURE__*/_jsxs(Typography, {\n                      children: [/*#__PURE__*/_jsx(\"b\", {\n                        children: \"Expected value:\"\n                      }), \" \", suggestion.maxLineEV | 0]\n                    }), /*#__PURE__*/_jsx(Typography, {\n                      paragraph: true,\n                      children: \"Select a highlighted line!\"\n                    })]\n                  });\n              }\n            }\n          })(), /*#__PURE__*/_jsx(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            onClick: handleClickReset,\n            children: \"Reset\"\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport default Calculator;","map":null,"metadata":{},"sourceType":"module"}