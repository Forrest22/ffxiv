{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/router';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport Grid from '@material-ui/core/Grid';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport Section from '../Section';\nimport UpcomingVoyagesTable from './UpcomingVoyagesTable';\nimport { fishingSpots, fishes, achievements } from './gists/data';\nimport calculateVoyages from './calculate-voyages';\nimport * as maps from './maps';\nimport { translate, upperFirst } from './utils';\nimport i18n from '../../i18n';\n\nvar UpcomingVoyages = function UpcomingVoyages(_ref) {\n  var now = _ref.now,\n      onSelectRoute = _ref.onSelectRoute,\n      t = _ref.t,\n      i18n = _ref.i18n;\n  var router = useRouter();\n\n  var _useState = useState(10),\n      numRows = _useState[0],\n      setNumRows = _useState[1];\n\n  var _useState2 = useState('none'),\n      filter = _useState2[0],\n      setFilter = _useState2[1];\n\n  var firstRender = useRef(false);\n  var locale = i18n.language;\n  useEffect(function () {\n    var queryFilter = maps.FILTER_MAP[String(router.query.filter)] ? String(router.query.filter) : 'none';\n\n    if (now && (!firstRender.current || filter !== queryFilter)) {\n      firstRender.current = true;\n      setFilter(queryFilter);\n      onSelectRoute(calculateVoyages(now, 1, maps.FILTER_MAP[queryFilter])[0].destinationCode);\n    }\n  });\n\n  var handleInputNumRows = function handleInputNumRows(event) {\n    setNumRows(Number(event.target.value));\n  };\n\n  var handleBlurNumRows = function handleBlurNumRows(event) {\n    var numRows = Number(event.target.value);\n\n    if (!numRows) {\n      setNumRows(10);\n    } else {\n      setNumRows(Math.min(Math.max(numRows, 1), 50));\n    }\n  };\n\n  var handleSelectFilter = function handleSelectFilter(event) {\n    var filter = event.target.value;\n    router.push({\n      pathname: router.pathname,\n      query: filter === 'none' ? null : {\n        filter: filter\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Section, {\n    title: t('upcoming-voyages'),\n    children: /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      spacing: 2,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsx(FormControl, {\n          fullWidth: true,\n          children: /*#__PURE__*/_jsx(TextField, {\n            variant: \"filled\",\n            label: t('number-of-rows'),\n            type: \"number\",\n            value: numRows,\n            onChange: handleInputNumRows,\n            onBlur: handleBlurNumRows\n          })\n        })\n      }), /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxs(FormControl, {\n          fullWidth: true,\n          variant: \"filled\",\n          children: [/*#__PURE__*/_jsx(InputLabel, {\n            children: t('filter-route')\n          }), /*#__PURE__*/_jsxs(Select, {\n            \"native\": true,\n            value: filter,\n            onChange: handleSelectFilter,\n            children: [/*#__PURE__*/_jsx(\"option\", {\n              value: \"none\",\n              children: t('no-filter')\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: t('blue-fish'),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"sothis\",\n                children: translate(locale, fishes[29788], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"coral_manta\",\n                children: translate(locale, fishes[29789], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"stonescale\",\n                children: translate(locale, fishes[29790], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"elasmosaurus\",\n                children: translate(locale, fishes[29791], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"hafgufa\",\n                children: translate(locale, fishes[32074], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"seafaring_toad\",\n                children: translate(locale, fishes[32094], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"placodus\",\n                children: translate(locale, fishes[32114], 'name')\n              })]\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: t('achievements'),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"octopodes\",\n                children: translate(locale, achievements[2563], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"sharks\",\n                children: translate(locale, achievements[2564], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"jellyfish\",\n                children: translate(locale, achievements[2565], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"seadragons\",\n                children: translate(locale, achievements[2566], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"balloons\",\n                children: translate(locale, achievements[2754], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"crabs\",\n                children: translate(locale, achievements[2755], 'name')\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"mantas\",\n                children: translate(locale, achievements[2756], 'name')\n              })]\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: upperFirst(translate(locale, fishingSpots[241], 'place_name_sub', 'no_article')),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"R\",\n                children: upperFirst(translate(locale, fishingSpots[241], 'place_name_sub', 'no_article'))\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"RD\",\n                children: [upperFirst(translate(locale, fishingSpots[241], 'place_name_sub', 'no_article')), \" - \", t('time-day')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"RS\",\n                children: [upperFirst(translate(locale, fishingSpots[241], 'place_name_sub', 'no_article')), \" - \", t('time-sunset')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"RN\",\n                children: [upperFirst(translate(locale, fishingSpots[241], 'place_name_sub', 'no_article')), \" - \", t('time-night')]\n              })]\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: upperFirst(translate(locale, fishingSpots[243], 'place_name_sub', 'no_article')),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"N\",\n                children: upperFirst(translate(locale, fishingSpots[243], 'place_name_sub', 'no_article'))\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"ND\",\n                children: [upperFirst(translate(locale, fishingSpots[243], 'place_name_sub', 'no_article')), \" - \", t('time-day')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"NS\",\n                children: [upperFirst(translate(locale, fishingSpots[243], 'place_name_sub', 'no_article')), \" - \", t('time-sunset')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"NN\",\n                children: [upperFirst(translate(locale, fishingSpots[243], 'place_name_sub', 'no_article')), \" - \", t('time-night')]\n              })]\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: upperFirst(translate(locale, fishingSpots[248], 'place_name_sub', 'no_article')),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"B\",\n                children: upperFirst(translate(locale, fishingSpots[248], 'place_name_sub', 'no_article'))\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"BD\",\n                children: [upperFirst(translate(locale, fishingSpots[248], 'place_name_sub', 'no_article')), \" - \", t('time-day')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"BS\",\n                children: [upperFirst(translate(locale, fishingSpots[248], 'place_name_sub', 'no_article')), \" - \", t('time-sunset')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"BN\",\n                children: [upperFirst(translate(locale, fishingSpots[248], 'place_name_sub', 'no_article')), \" - \", t('time-night')]\n              })]\n            }), /*#__PURE__*/_jsxs(\"optgroup\", {\n              label: upperFirst(translate(locale, fishingSpots[250], 'place_name_sub', 'no_article')),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"T\",\n                children: upperFirst(translate(locale, fishingSpots[250], 'place_name_sub', 'no_article'))\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"TD\",\n                children: [upperFirst(translate(locale, fishingSpots[250], 'place_name_sub', 'no_article')), \" - \", t('time-day')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"TS\",\n                children: [upperFirst(translate(locale, fishingSpots[250], 'place_name_sub', 'no_article')), \" - \", t('time-sunset')]\n              }), /*#__PURE__*/_jsxs(\"option\", {\n                value: \"TN\",\n                children: [upperFirst(translate(locale, fishingSpots[250], 'place_name_sub', 'no_article')), \" - \", t('time-night')]\n              })]\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsx(NoSsr, {\n        children: now && /*#__PURE__*/_jsx(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsx(UpcomingVoyagesTable, {\n            now: now,\n            numRows: numRows,\n            filter: maps.FILTER_MAP[filter],\n            onSelectRoute: onSelectRoute\n          })\n        })\n      })]\n    })\n  });\n};\n\nexport default i18n.withTranslation('ocean-fishing')(UpcomingVoyages);","map":null,"metadata":{},"sourceType":"module"}