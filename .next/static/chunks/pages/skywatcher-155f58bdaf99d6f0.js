(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{6575:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/skywatcher",function(){return t(6268)}])},6268:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ue},default:function(){return se}});var r=t(5944),i=t(7294),a=t(1983),l=t(9104),c=t(5861),o=t(6906),h=t(8884),Z=t(7357),d=t(4054),u=t(480),s=t(7312),g=t(9368),p=t(8360),f=t(5819),v=t(2902),m=t(1039),w=t(8407),y=(0,w.JL)(),b=function(e){var n=e.now,t=(0,a.$G)("skywatcher"),o=t.t,b=t.i18n,x=(0,i.useState)(null),B=x[0],X=x[1],k=(0,i.useState)(!0),S=k[0],C=k[1],E=(0,i.useState)(!1),T=E[0],_=E[1],P=(0,i.useState)(!1),W=P[0],R=P[1],I=b.language;return(0,r.BX)(h.Z,{title:o("upcomingWeather"),children:[(0,r.BX)(Z.Z,{mb:2,children:[(0,r.BX)(d.Z,{variant:"filled",fullWidth:!0,margin:"dense",children:[(0,r.tZ)(s.Z,{children:o("selectRegion")}),(0,r.tZ)(l.Z,{children:(0,r.BX)(p.Z,{onChange:function(e){X("none"===e.target.value?null:e.target.value)},value:null!==B&&void 0!==B?B:"none",children:[(0,r.tZ)(f.Z,{value:"none",children:o("showAllRegions")}),y.map((function(e){return(0,r.tZ)(f.Z,{value:e,children:(0,w.xh)(e,I)},e)}))]})})]}),(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{color:"primary",checked:S,onChange:function(){C(!S)}}),label:o("showLabels")}),(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{color:"primary",checked:T,onChange:function(){_(!T)}}),label:o("showLocalTimes")}),(0,r.tZ)(v.Z,{enterDelay:200,title:(0,r.tZ)(c.Z,{variant:"caption",children:"Include places with only 1 possible weather"}),children:(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{color:"primary",checked:W,onChange:function(){R(!W)}}),label:o("showAllPlaces")})})]}),(0,r.tZ)(l.Z,{children:(null!==B?[B]:y).map((function(e){var t=(0,w.fQ)(e).flatMap((function(e){return(0,w.RR)(e).map((function(n,t){return{place:e,weatherRateIndex:t}}))}));return(0,r.BX)(h.Z,{children:[(0,r.tZ)(c.Z,{variant:"h3",gutterBottom:!0,children:(0,w.xh)(e,I)}),(0,r.tZ)(m.Z,{now:n,places:W?t:t.filter((function(e){var n=e.place,t=e.weatherRateIndex;return(0,w.RW)(n,t).length>1})),showLabels:S,showLocalTime:T})]},e)}))})]})},x=t(6886),B=t(3457),X=t(476),k=t(1903),S=t(6901),C=t(2855),E=t(6613),T=t(5113),_=t(2882),P=t(7906),W=t(295),R=t(3816),I=t(3252),L=t(3619),z=t(2203),G=t(8473),N=t(6627),O={month:"2-digit",day:"2-digit"};function j(e){switch(e%3){case 0:return"00:00";case 1:return"08:00";case 2:return"16:00";default:return"??:??"}}var D=function(e){var n=e.now,t=e.forecast,i=(0,a.$G)("ocean-fishing").i18n.language;return(0,r.tZ)(_.Z,{component:T.Z,sx:{mb:2},children:(0,r.tZ)(P.Z,{children:(0,r.tZ)(W.Z,{children:function(){var e;return t.map((function(t,a){var l=t.prevWeather,o=t.currWeather,h=t.seed,Z=t.date,d=Z.toLocaleDateString(i,O);return(0,r.BX)(R.Z,{hover:!0,children:[(0,r.tZ)(I.Z,{align:"right",sx:{width:100},children:(0,r.tZ)(c.Z,{children:e!==(e=d)&&d})}),(0,r.tZ)(I.Z,{align:"right",sx:{width:150},children:(0,r.tZ)(c.Z,{children:(0,G.U9)(Z,{padded:!0,locale:i})})}),(0,r.tZ)(I.Z,{children:(0,r.tZ)(c.Z,{children:(0,G.LW)(n,Z,{locale:i})})}),(0,r.tZ)(I.Z,{align:"right",children:(0,r.tZ)(c.Z,{children:j(h-1)})}),(0,r.BX)(I.Z,{align:"center",sx:{width:100,verticalAlign:"top"},children:[(0,r.tZ)(z.Z,{weather:l}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,N.Z)((0,w.NI)(l,i))})]}),(0,r.tZ)(I.Z,{align:"center",sx:{width:0},children:(0,r.tZ)(L.Z,{})}),(0,r.tZ)(I.Z,{align:"right",sx:{width:0},children:(0,r.tZ)(c.Z,{children:j(h)})}),(0,r.BX)(I.Z,{align:"center",sx:{width:100,verticalAlign:"top"},children:[(0,r.tZ)(z.Z,{weather:o}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,N.Z)((0,w.NI)(o,i))})]})]},a)}))}()})})})};function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){H(e,n,t[n])}))}return e}var F=[],$=!0,M=!1,Q=void 0;try{for(var J,U=(0,w.JL)()[Symbol.iterator]();!($=(J=U.next()).done);$=!0){var q=J.value,K=!0,V=!1,Y=void 0;try{for(var ee,ne=(0,w.fQ)(q)[Symbol.iterator]();!(K=(ee=ne.next()).done);K=!0)for(var te=ee.value,re=0;re<(0,w.RR)(te).length;++re)F.push({region:q,place:te,weatherRateIndex:re})}catch(ge){V=!0,Y=ge}finally{try{K||null==ne.return||ne.return()}finally{if(V)throw Y}}}}catch(ge){M=!0,Q=ge}finally{try{$||null==U.return||U.return()}finally{if(M)throw Q}}var ie=function(e){var n=e.now,t=(0,a.$G)("skywatcher"),c=t.t,o=t.i18n,v=(0,i.useState)(null),m=v[0],y=v[1],b=(0,i.useState)(null),T=b[0],_=b[1],P=(0,i.useState)(null),W=P[0],R=P[1],I=(0,i.useState)({0:!0,8:!0,16:!0}),L=I[0],z=I[1],G=null!==m?(0,w.RW)(m.place,m.weatherRateIndex):null,N=L[0]||L[8]||L[16],O=null!==m&&N?(0,w.EZ)(m.place,m.weatherRateIndex,(function(e,n,t){return(null===T||T===e)&&((null===W||W===n)&&(!(!L[0]&&t%3===0)&&(!(!L[8]&&t%3===1)&&!(!L[16]&&t%3===2))))}),(0,w.Th)(n)):null,j=o.language,$=function(e){z(A({},L,H({},e,!L[e])))};return(0,r.tZ)(h.Z,{title:c("forecaster"),children:(0,r.BX)(x.ZP,{container:!0,spacing:2,children:[(0,r.tZ)(x.ZP,{item:!0,xs:12,md:4,children:(0,r.tZ)(C.Z,{options:F,groupBy:function(e){var n=e.region;return(0,w.xh)(n,j)},getOptionLabel:function(e){var n=e.place,t=e.weatherRateIndex;return(0,w.xh)(n,j).replace(/<\/?.+?>/g,"")+(t>0?" (alt. ".concat(t,")"):"")},renderInput:function(e){return(0,r.tZ)(k.Z,A({},e,{variant:"standard",label:c("place"),placeholder:c("selectPlace"),InputLabelProps:{shrink:!0}}))},value:m,onChange:function(e,n){y(n),_(null),R(null)}})}),(0,r.BX)(x.ZP,{item:!0,xs:12,md:4,children:[(0,r.BX)(d.Z,{variant:"standard",fullWidth:!0,children:[(0,r.tZ)(s.Z,{children:c("transitionWeather")}),(0,r.BX)(p.Z,{value:null!==T?T:"none",disabled:null===m,onChange:function(e){_("none"===e.target.value?null:+e.target.value)},children:[(0,r.tZ)(f.Z,{value:"none",children:c(null!==G?"anyWeather":"selectPlaceFirst")}),null===G||void 0===G?void 0:G.map((function(e){return(0,r.tZ)(f.Z,{value:String(e),children:(0,w.NI)(e,j)},e)}))]})]}),(0,r.tZ)(Z.Z,{textAlign:"center",p:1,children:(0,r.tZ)(E.Z,{})}),(0,r.BX)(d.Z,{variant:"standard",fullWidth:!0,children:[(0,r.tZ)(s.Z,{children:c("targetWeather")}),(0,r.BX)(p.Z,{value:null!==W?W:"none",disabled:null===m,onChange:function(e){R("none"===e.target.value?null:+e.target.value)},children:[(0,r.tZ)(f.Z,{value:"none",children:c(null!==G?"anyWeather":"selectPlaceFirst")}),null===G||void 0===G?void 0:G.map((function(e){return(0,r.tZ)(f.Z,{value:e,children:(0,w.NI)(e,j)},e)}))]})]})]}),(0,r.tZ)(x.ZP,{item:!0,xs:12,md:4,children:(0,r.BX)(d.Z,{component:"fieldset",children:[(0,r.tZ)(X.Z,{component:"legend",children:c("selectTimes")}),(0,r.BX)(B.Z,{children:[(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{checked:L[0],onChange:$.bind(null,0)}),label:"00:00"}),(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{checked:L[8],onChange:$.bind(null,8)}),label:"08:00"}),(0,r.tZ)(u.Z,{control:(0,r.tZ)(g.Z,{checked:L[16],onChange:$.bind(null,16)}),label:"16:00"})]})]})}),null!==m&&!N&&(0,r.tZ)(x.ZP,{item:!0,xs:12,children:(0,r.tZ)(S.Z,{variant:"outlined",severity:"error",children:c("noTimeSelected")})}),null!==O&&(0,r.tZ)(x.ZP,{item:!0,xs:12,children:(0,r.tZ)(l.Z,{children:(0,r.tZ)(D,{now:n,forecast:O})})})]})})},ae=t(3184),le=t(7255),ce=t(7556),oe=t(5679),he=t(7456),Ze=function(){var e=(0,a.$G)("skywatcher"),n=e.t,t=e.i18n.language;return(0,r.BX)(h.Z,{title:n("algorithm"),children:[(0,r.BX)(c.Z,{paragraph:!0,children:["The weather in Eorzea can be predicted. First, the number of Eorzean hours and days since the ",(0,r.tZ)(le.C,{href:"https://en.wikipedia.org/wiki/Unix_time",children:"Unix epoch"})," is calculated."]}),(0,r.tZ)(ce.Z,{language:"javascript",children:"\n// Get seconds since Jan 1st 1970\nconst unixSeconds = Date.now() / 1000\n\n// Get Eorzean hours/days since (1 Eorzean hour = 175 seconds)\nconst eorzeanHours = Math.floor(unixSeconds / 175)\nconst eorzeanDays = Math.floor(eorzeanHours / 24)\n        ".trim()}),(0,r.tZ)(c.Z,{paragraph:!0,children:"Next, compute which of the 3 time chunks the hour falls in."}),(0,r.tZ)(ce.Z,{language:"javascript",children:"\nlet timeChunk = (eorzeanHours % 24) - (eorzeanHours % 8)\n\n// Adjust time chunk so that\n//   16:00 is 00,\n//   00:00 is 08,\n//   08:00 is 16\ntimeChunk = (timeChunk + 8) % 24\n        ".trim()}),(0,r.tZ)(c.Z,{paragraph:!0,children:"The number of Eorzean days and the time chunk form the seed that is hashed."}),(0,r.tZ)(ce.Z,{language:"javascript",children:"\nconst seed = eorzeanDays * 100 + timeChunk\n\n// Do a little hashing\nconst step1 = (seed << 11) ^ seed\nconst step2 = (step1 >>> 8) ^ step1\n\n// Return a number between 0-99 inclusive\nconst weatherChance = step2 % 100\n        ".trim()}),(0,r.BX)(c.Z,{paragraph:!0,children:["With ",(0,r.tZ)("code",{children:"weatherChance"})," computed as a number from 0 to 99, each zone can determine its weather. For example, the weather in Eureka Anemos is Gales if ",(0,r.tZ)("code",{children:"weatherChance"})," is between 30 and 59. Its full table of weathers is"]}),(0,r.tZ)(T.Z,{sx:{display:"inline-block",mb:2},children:(0,r.BX)(P.Z,{children:[(0,r.tZ)(ae.Z,{children:(0,r.BX)(R.Z,{children:[(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{component:"code",children:"weatherChance"})}),(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{children:"Weather"})})]})}),(0,r.BX)(W.Z,{children:[(0,r.BX)(R.Z,{children:[(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{children:"00-29"})}),(0,r.BX)(I.Z,{align:"center",children:[(0,r.tZ)(z.Z,{weather:he.y.FairSkies}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,oe.Z)(he.y.FairSkies,t)})]})]}),(0,r.BX)(R.Z,{children:[(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{children:"30-59"})}),(0,r.BX)(I.Z,{align:"center",children:[(0,r.tZ)(z.Z,{weather:he.y.Gales}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,oe.Z)(he.y.Gales,t)})]})]}),(0,r.BX)(R.Z,{children:[(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{children:"60-89"})}),(0,r.BX)(I.Z,{align:"center",children:[(0,r.tZ)(z.Z,{weather:he.y.Showers}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,oe.Z)(he.y.Showers,t)})]})]}),(0,r.BX)(R.Z,{children:[(0,r.tZ)(I.Z,{align:"center",children:(0,r.tZ)(c.Z,{children:"90-99"})}),(0,r.BX)(I.Z,{align:"center",children:[(0,r.tZ)(z.Z,{weather:he.y.Snow}),(0,r.tZ)(c.Z,{component:"div",variant:"caption",sx:{lineHeight:"110%"},children:(0,oe.Z)(he.y.Snow,t)})]})]})]})]})})]})},de=i.memo(Ze),ue=!0,se=function(){var e=(0,a.$G)("skywatcher").t,n=(0,i.useState)(new Date),t=n[0],Z=n[1];return(0,i.useEffect)((function(){var e;return function n(){var t=new Date;Z(t),e=setTimeout((function(){e=setTimeout(n,(6e4-1440*t.getTime()/70%6e4)/(1440/70))}),0)}(),function(){clearTimeout(e)}}),[]),(0,r.BX)(o.Z,{title:e("_title"),description:e("_description"),children:[(0,r.BX)(h.Z,{children:[(0,r.BX)(c.Z,{paragraph:!0,children:["The time in Eorzea is ",(0,r.tZ)("b",{children:(0,r.tZ)(l.Z,{children:(0,G.Qs)(new Date(t.getTime()*(1440/70)))})}),"."]}),(0,r.BX)("ul",{children:[(0,r.tZ)(c.Z,{component:"li",children:"Some places have multiple possible weather rates depending on certain conditions. For example, Amh Araeng will always be Everlasting Light until a certain point in the MSQ."}),(0,r.tZ)(c.Z,{component:"li",children:"Certain special weathers such as Tension will replace the predicted weather depending on certain conditions."}),(0,r.BX)(c.Z,{component:"li",children:["The weathers associated with The ",(0,r.tZ)("em",{children:"Endeavor"})," have no apparent correlation with the weathers experienced during the voyage."]})]})]}),(0,r.tZ)(ie,{now:t}),(0,r.tZ)(b,{now:t}),(0,r.tZ)(de,{})]})}},7556:function(e,n,t){"use strict";var r=t(5944),i=(t(7294),t(2734)),a=t(5113),l=t(7561),c=t(6671),o=t(2538),h=t(8575),Z=t(5801);l.Z.registerLanguage("javascript",o.Z),l.Z.registerLanguage("latex",h.Z),l.Z.registerLanguage("typescript",Z.Z);n.Z=function(e){var n=e.language,t=e.sx,o=e.children,h=(0,i.Z)();return(0,r.tZ)(a.Z,{component:l.Z,variant:"outlined",language:n,style:"dark"===h.palette.mode?c.FE:c.bW,sx:t,children:o})}},8884:function(e,n,t){"use strict";var r=t(5944),i=(t(7294),t(7357)),a=t(5861);n.Z=function(e){var n=e.title,t=e.sx,l=e.children;return(0,r.BX)(i.Z,{component:"section",mb:4,sx:t,children:[void 0!==n&&(0,r.tZ)(a.Z,{variant:"h2",gutterBottom:!0,children:n}),l]})}}},function(e){e.O(0,[962,325,903,477,823,27,855,372,695,39,774,888,179],(function(){return n=6575,e(e.s=n);var n}));var n=e.O();_N_E=n}]);